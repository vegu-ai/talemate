{
  "title": "Sim Suite Process Commands",
  "id": "c6d66bbb-bd4c-42b7-801a-b6f691ac7ac4",
  "properties": {},
  "x": 0,
  "y": 0,
  "width": 200,
  "height": 100,
  "collapsed": false,
  "inherited": false,
  "registry": "sim-suite/simSuiteProcessCommands",
  "nodes": {
    "259e4d35-c63c-4879-8f49-eecc5d3e5904": {
      "title": "OR Router",
      "id": "259e4d35-c63c-4879-8f49-eecc5d3e5904",
      "properties": {},
      "x": 615,
      "y": 270,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ORRouter",
      "base_type": "core/Node"
    },
    "6bbd61ae-e15b-4712-b2b2-fbfe6ac1f593": {
      "title": "Stop",
      "id": "6bbd61ae-e15b-4712-b2b2-fbfe6ac1f593",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 815,
      "y": 270,
      "width": 271,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "bd9f015c-f2fb-4030-861f-35bb0fe75778": {
      "title": "Stage -1",
      "id": "bd9f015c-f2fb-4030-861f-35bb0fe75778",
      "properties": {
        "stage": -1
      },
      "x": 1115,
      "y": 300,
      "width": 210,
      "height": 118,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "dbfa39cc-7e94-4417-89c1-9817a9fefb51": {
      "title": "Switch",
      "id": "dbfa39cc-7e94-4417-89c1-9817a9fefb51",
      "properties": {
        "pass_through": true
      },
      "x": 365,
      "y": 90,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "9a4d8aaa-be27-4069-890d-c9727eaddb42": {
      "title": "Compare",
      "id": "9a4d8aaa-be27-4069-890d-c9727eaddb42",
      "properties": {
        "operation": "equals",
        "tolerance": 0.0001,
        "a": null,
        "b": null
      },
      "x": 363,
      "y": 300,
      "width": 210,
      "height": 150,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Compare",
      "base_type": "core/Node"
    },
    "39a5e426-948d-4c65-8e1f-a6301d648806": {
      "title": "Get",
      "id": "39a5e426-948d-4c65-8e1f-a6301d648806",
      "properties": {
        "attribute": "message"
      },
      "x": 340,
      "y": 927,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Get",
      "base_type": "core/Node"
    },
    "bc46a2cc-f43d-4663-a4da-0fc4ce671c70": {
      "title": "Get Scene State",
      "id": "bc46a2cc-f43d-4663-a4da-0fc4ce671c70",
      "properties": {},
      "x": 730,
      "y": 717,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/GetSceneState",
      "base_type": "core/Node"
    },
    "2cdd312f-e496-4b14-9d72-3f7baa21fd8a": {
      "title": "Determine Content Context",
      "id": "2cdd312f-e496-4b14-9d72-3f7baa21fd8a",
      "properties": {
        "description": null
      },
      "x": 640,
      "y": 887,
      "width": 228,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/creator/DetermineContentContext",
      "base_type": "core/Node"
    },
    "9f6a0861-899a-42ee-afe8-908fd3d22d02": {
      "title": "Set",
      "id": "9f6a0861-899a-42ee-afe8-908fd3d22d02",
      "properties": {
        "attribute": "context"
      },
      "x": 950,
      "y": 827,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Set",
      "base_type": "core/Node"
    },
    "5332d0b6-844b-4f7a-9247-8597fc2218d5": {
      "title": "Switch",
      "id": "5332d0b6-844b-4f7a-9247-8597fc2218d5",
      "properties": {
        "pass_through": true
      },
      "x": 340,
      "y": 728,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "1ca5c8d6-e192-4d7e-b58e-5f2f339275d1": {
      "title": "Stage 0",
      "id": "1ca5c8d6-e192-4d7e-b58e-5f2f339275d1",
      "properties": {
        "stage": 0
      },
      "x": 1221,
      "y": 858,
      "width": 210,
      "height": 118,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "4d3bb32c-557c-441f-a97c-0058fe425bb3": {
      "title": "functions",
      "id": "4d3bb32c-557c-441f-a97c-0058fe425bb3",
      "properties": {
        "item_type": "any",
        "items": []
      },
      "x": 469,
      "y": 1652,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "data/MakeList",
      "base_type": "core/Node"
    },
    "482abc1b-d89e-4fae-a3db-5a8641bfece0": {
      "title": "-1",
      "id": "482abc1b-d89e-4fae-a3db-5a8641bfece0",
      "properties": {
        "value": "-1",
        "number_type": "int"
      },
      "x": -70,
      "y": 530,
      "width": 210,
      "height": 82,
      "collapsed": true,
      "inherited": false,
      "registry": "data/number/Make",
      "base_type": "core/Node"
    },
    "3b5f33aa-4f83-4558-8269-dcfe0e4d7ab2": {
      "title": "set_simulated_environment",
      "id": "3b5f33aa-4f83-4558-8269-dcfe0e4d7ab2",
      "properties": {
        "name": "set_simulated_environment",
        "allow_multiple_calls": false
      },
      "x": 297,
      "y": 1709,
      "width": 246,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "64956371-3d71-4c2f-9784-e20acdda7b14": {
      "title": "Fn Sim Suite Set User Persona",
      "id": "64956371-3d71-4c2f-9784-e20acdda7b14",
      "properties": {},
      "x": 16,
      "y": 1849,
      "width": 247,
      "height": 30,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteSetUserPersona",
      "base_type": "core/functions/Function"
    },
    "7255ed88-831c-4020-96f5-f7fa3f5b0692": {
      "title": "AI Function Callback",
      "id": "7255ed88-831c-4020-96f5-f7fa3f5b0692",
      "properties": {
        "name": "set_user_persona",
        "allow_multiple_calls": false
      },
      "x": 295,
      "y": 1849,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "2aeeaf5d-3fac-4d3a-88ca-52db1315732b": {
      "title": "Fn Sim Suite Set Environment",
      "id": "2aeeaf5d-3fac-4d3a-88ca-52db1315732b",
      "properties": {},
      "x": 16,
      "y": 1719,
      "width": 250,
      "height": 33,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteSetEnvironment",
      "base_type": "core/functions/Function"
    },
    "4e6f35e4-4a83-422d-96c1-5509b288f825": {
      "title": "Fn Sim Suite Add Character",
      "id": "4e6f35e4-4a83-422d-96c1-5509b288f825",
      "properties": {},
      "x": 15,
      "y": 1989,
      "width": 248,
      "height": 27,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteAddCharacter",
      "base_type": "core/functions/Function"
    },
    "d9715df8-780a-4927-bfad-cbb1719faad4": {
      "title": "List Append",
      "id": "d9715df8-780a-4927-bfad-cbb1719faad4",
      "properties": {},
      "x": 615,
      "y": 1729,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "f01c7a76-516c-4fed-90f3-843cff0efc02": {
      "title": "List Append",
      "id": "f01c7a76-516c-4fed-90f3-843cff0efc02",
      "properties": {},
      "x": 615,
      "y": 2009,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "8986a373-6be2-4518-a59e-9af93376b8fd": {
      "title": "AI Function Callback",
      "id": "8986a373-6be2-4518-a59e-9af93376b8fd",
      "properties": {
        "name": "remove_simulated_character",
        "allow_multiple_calls": true
      },
      "x": 295,
      "y": 2139,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "5c1f1498-d649-47af-b539-85d243d2d426": {
      "title": "Fn Sim Suite Remove Character",
      "id": "5c1f1498-d649-47af-b539-85d243d2d426",
      "properties": {},
      "x": 15,
      "y": 2139,
      "width": 244,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteRemoveCharacter",
      "base_type": "core/functions/Function"
    },
    "00948669-9706-491a-bbaf-e261b3868871": {
      "title": "List Append",
      "id": "00948669-9706-491a-bbaf-e261b3868871",
      "properties": {},
      "x": 615,
      "y": 1869,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "cc341c09-9cc5-4c88-a0ee-e7c6900ac8cb": {
      "title": "TRUE",
      "id": "cc341c09-9cc5-4c88-a0ee-e7c6900ac8cb",
      "properties": {
        "value": true
      },
      "x": 817,
      "y": 2576,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "d659e53b-05c0-4e45-99c3-4af8f02f986f": {
      "title": "Director",
      "id": "d659e53b-05c0-4e45-99c3-4af8f02f986f",
      "properties": {
        "agent_name": "director"
      },
      "x": 807,
      "y": 2626,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/GetAgent",
      "base_type": "core/Node"
    },
    "5443ac95-59a4-4404-b439-0a78e988822b": {
      "title": "List Append",
      "id": "5443ac95-59a4-4404-b439-0a78e988822b",
      "properties": {},
      "x": 615,
      "y": 2159,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "0ee60b86-36e8-4605-9bbe-ce8f93a0a874": {
      "title": "AI Function Callback",
      "id": "0ee60b86-36e8-4605-9bbe-ce8f93a0a874",
      "properties": {
        "name": "change_simulated_character",
        "allow_multiple_calls": true
      },
      "x": 297,
      "y": 2297,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "74c40ad0-3d33-4c2b-bc79-7a4f9ddb4a8b": {
      "title": "Fn Sim Suite Change Character",
      "id": "74c40ad0-3d33-4c2b-bc79-7a4f9ddb4a8b",
      "properties": {},
      "x": 17,
      "y": 2297,
      "width": 244,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteChangeCharacter",
      "base_type": "core/functions/Function"
    },
    "f32b4a0b-13cb-4ccc-b465-a5a7299ef0e0": {
      "title": "Template Variables",
      "id": "f32b4a0b-13cb-4ccc-b465-a5a7299ef0e0",
      "properties": {
        "data": {}
      },
      "x": 779,
      "y": 2694,
      "width": 210,
      "height": 92,
      "collapsed": true,
      "inherited": false,
      "registry": "data/MakeDict",
      "base_type": "core/Node"
    },
    "cf91d14b-fe91-4782-95de-ce1bc6ba1488": {
      "title": "GET scene loop.user_message",
      "id": "cf91d14b-fe91-4782-95de-ce1bc6ba1488",
      "properties": {
        "name": "user_message",
        "scope": "scene loop"
      },
      "x": 30,
      "y": 920,
      "width": 256,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "21f28ea1-ea2a-4667-b6d3-366d466540cd": {
      "title": "GET game.has_issued_instructions",
      "id": "21f28ea1-ea2a-4667-b6d3-366d466540cd",
      "properties": {
        "name": "has_issued_instructions",
        "scope": "game"
      },
      "x": 30,
      "y": 730,
      "width": 260,
      "height": 127,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "79db98f5-829c-4557-9a5d-893c7e0d8caf": {
      "title": "GET game.last_processed_call",
      "id": "79db98f5-829c-4557-9a5d-893c7e0d8caf",
      "properties": {
        "name": "last_processed_call",
        "scope": "game"
      },
      "x": 40,
      "y": 480,
      "width": 264,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "cf01e743-abd7-43a6-9fc1-2addee07c5db": {
      "title": "GET scene loop.user_message_id",
      "id": "cf01e743-abd7-43a6-9fc1-2addee07c5db",
      "properties": {
        "name": "user_message_id",
        "scope": "scene loop"
      },
      "x": 40,
      "y": 280,
      "width": 265,
      "height": 123,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "5ac06e30-8dce-4d7a-954a-db8f3aed6265": {
      "title": "GET game.player_message_is_instruction",
      "id": "5ac06e30-8dce-4d7a-954a-db8f3aed6265",
      "properties": {
        "name": "player_message_is_instruction",
        "scope": "game"
      },
      "x": 20,
      "y": 90,
      "width": 319,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "4c292c49-66fa-4340-8af6-5549db06a76a": {
      "title": "List Append",
      "id": "4c292c49-66fa-4340-8af6-5549db06a76a",
      "properties": {},
      "x": 617,
      "y": 2317,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "ac44d63c-9984-401e-af09-ca2522305760": {
      "title": "AI Function Callback",
      "id": "ac44d63c-9984-401e-af09-ca2522305760",
      "properties": {
        "name": "end_simulation",
        "allow_multiple_calls": false
      },
      "x": 297,
      "y": 2458,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "3008c0f4-105d-444a-8fde-0ac11a21f40c": {
      "title": "Stage 2",
      "id": "3008c0f4-105d-444a-8fde-0ac11a21f40c",
      "properties": {
        "stage": 2
      },
      "x": 1272,
      "y": 2657,
      "width": 210,
      "height": 118,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "0e9f928f-8a5b-4de2-8ac5-ed64b7dd4bff": {
      "title": "Fn Sim Suite End Simulation",
      "id": "0e9f928f-8a5b-4de2-8ac5-ed64b7dd4bff",
      "properties": {},
      "x": 20,
      "y": 2460,
      "width": 238,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteEndSimulation",
      "base_type": "core/functions/Function"
    },
    "b2b1f9c0-94e9-40f1-b323-bc365546fa6d": {
      "title": "Fn Sim Suite Respond",
      "id": "b2b1f9c0-94e9-40f1-b323-bc365546fa6d",
      "properties": {},
      "x": 20,
      "y": 2611,
      "width": 240,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteRespond",
      "base_type": "core/functions/Function"
    },
    "048a2ad7-2d98-416f-aaa0-4075d63dc7c2": {
      "title": "List Append",
      "id": "048a2ad7-2d98-416f-aaa0-4075d63dc7c2",
      "properties": {},
      "x": 617,
      "y": 2468,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "8ca8daf3-1070-44a4-92ec-6c7d4b3f0b86": {
      "title": "AI Function Callback",
      "id": "8ca8daf3-1070-44a4-92ec-6c7d4b3f0b86",
      "properties": {
        "name": "respond_to_user",
        "allow_multiple_calls": false
      },
      "x": 300,
      "y": 2611,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "09f907ad-cf11-4325-b6ff-f2d3e0605282": {
      "title": "List Append",
      "id": "09f907ad-cf11-4325-b6ff-f2d3e0605282",
      "properties": {},
      "x": 610,
      "y": 2621,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "c7172353-eaf2-4db3-b29e-ae904c50d279": {
      "title": "AI Function Callback",
      "id": "c7172353-eaf2-4db3-b29e-ae904c50d279",
      "properties": {
        "name": "set_simulation_goal",
        "allow_multiple_calls": false
      },
      "x": 300,
      "y": 2770,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "10fb2431-92ad-4dca-b16a-d4091b85f0f3": {
      "title": "Fn Sim Suite Set Goal",
      "id": "10fb2431-92ad-4dca-b16a-d4091b85f0f3",
      "properties": {},
      "x": 20,
      "y": 2770,
      "width": 241,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "sim-suite/fnSimSuiteSetGoal",
      "base_type": "core/functions/Function"
    },
    "d45f07ff-c3ce-4aac-bae6-b9c77089cb69": {
      "title": "List Append",
      "id": "d45f07ff-c3ce-4aac-bae6-b9c77089cb69",
      "properties": {},
      "x": 610,
      "y": 2790,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/ListAppend",
      "base_type": "core/Node"
    },
    "3da498c0-55de-4ec3-9943-6486279b9826": {
      "title": "GET scene loop.user_message",
      "id": "3da498c0-55de-4ec3-9943-6486279b9826",
      "properties": {
        "name": "user_message",
        "scope": "scene loop"
      },
      "x": 51,
      "y": 3706,
      "width": 258,
      "height": 143,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "6d707f1c-af55-481a-970a-eb7a9f9c45dd": {
      "title": "Toggle Message Context Visibility",
      "id": "6d707f1c-af55-481a-970a-eb7a9f9c45dd",
      "properties": {
        "hidden": true
      },
      "x": 401,
      "y": 3706,
      "width": 277,
      "height": 60,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/message/ToggleMessageContextVisibility",
      "base_type": "core/Node"
    },
    "4398fb44-e718-4e41-9fbd-baa68bab3f9d": {
      "title": "Compare",
      "id": "4398fb44-e718-4e41-9fbd-baa68bab3f9d",
      "properties": {
        "operation": "greater_than",
        "tolerance": 0.0001,
        "a": 0,
        "b": 0
      },
      "x": 520,
      "y": 2987,
      "width": 210,
      "height": 150,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Compare",
      "base_type": "core/Node"
    },
    "d08ecd6b-8bff-43f9-b8d4-dc2a8b3449a7": {
      "title": "Length",
      "id": "d08ecd6b-8bff-43f9-b8d4-dc2a8b3449a7",
      "properties": {},
      "x": 350,
      "y": 2997,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Length",
      "base_type": "core/Node"
    },
    "bd518119-5914-4d91-9df7-785e6d11e82f": {
      "title": "Join",
      "id": "bd518119-5914-4d91-9df7-785e6d11e82f",
      "properties": {
        "delimiter": " \\n"
      },
      "x": 520,
      "y": 3207,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Join",
      "base_type": "core/Node"
    },
    "662668b4-5722-4215-8299-e9cad9812751": {
      "title": "Dict Set",
      "id": "662668b4-5722-4215-8299-e9cad9812751",
      "properties": {
        "key": "simulation_stack"
      },
      "x": 760,
      "y": 3217,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "1476cf7e-654b-401a-8a0d-71dbe1971bee": {
      "title": "Push History",
      "id": "1476cf7e-654b-401a-8a0d-71dbe1971bee",
      "properties": {
        "emit_message": true
      },
      "x": 1500,
      "y": 3030,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/history/Push",
      "base_type": "core/Node"
    },
    "e072a0d3-e87a-4156-84a7-02ffc75579c7": {
      "title": "Stage 3",
      "id": "e072a0d3-e87a-4156-84a7-02ffc75579c7",
      "properties": {
        "stage": 3
      },
      "x": 1790,
      "y": 3040,
      "width": 210,
      "height": 118,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "06175a92-abbe-4483-9ab2-abaee2104728": {
      "title": "SET scene loop.simulation_calls",
      "id": "06175a92-abbe-4483-9ab2-abaee2104728",
      "properties": {
        "name": "simulation_calls",
        "scope": "scene loop"
      },
      "x": 270,
      "y": 1160,
      "width": 260,
      "height": 130,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "9b424999-8a69-4c87-9aa5-c3a0ed6ac708": {
      "title": "Format",
      "id": "9b424999-8a69-4c87-9aa5-c3a0ed6ac708",
      "properties": {},
      "x": 1040,
      "y": 3148,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Format",
      "base_type": "core/Node"
    },
    "c5eff825-93b6-44e8-a5d7-f7b3791d5590": {
      "title": "Switch",
      "id": "c5eff825-93b6-44e8-a5d7-f7b3791d5590",
      "properties": {
        "pass_through": true
      },
      "x": 860,
      "y": 3000,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "32944b02-d2f9-45c0-a222-79facd994472": {
      "title": "Generate Scene Narration",
      "id": "32944b02-d2f9-45c0-a222-79facd994472",
      "properties": {},
      "x": 1220,
      "y": 3040,
      "width": 245,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/narrator/GenerateSceneNarration",
      "base_type": "core/Node"
    },
    "c5971215-ffce-44f2-a0ad-46571ebe83f8": {
      "title": "Emit Status",
      "id": "c5971215-ffce-44f2-a0ad-46571ebe83f8",
      "properties": {
        "message": "Simulation suite idle.",
        "status": "success",
        "as_scene_message": true
      },
      "x": 44,
      "y": 3956,
      "width": 267,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "event/EmitStatus",
      "base_type": "core/Node"
    },
    "45a20e1f-ac8d-40e1-81ee-d72908e33fd8": {
      "title": "AI Function Callback",
      "id": "45a20e1f-ac8d-40e1-81ee-d72908e33fd8",
      "properties": {
        "name": "add_simulated_character",
        "allow_multiple_calls": false
      },
      "x": 295,
      "y": 1989,
      "width": 247,
      "height": 82,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Callback",
      "base_type": "core/Node"
    },
    "aca80b8f-aff4-4c2b-a76e-e3f53106092e": {
      "title": "Emit Status",
      "id": "aca80b8f-aff4-4c2b-a76e-e3f53106092e",
      "properties": {
        "message": "Processing instructions",
        "status": "busy",
        "as_scene_message": true
      },
      "x": 220,
      "y": 1350,
      "width": 282,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "event/EmitStatus",
      "base_type": "core/Node"
    },
    "e9dd7fff-d43c-4ef4-8587-cbc16f961ba0": {
      "title": "GET game.rounds",
      "id": "e9dd7fff-d43c-4ef4-8587-cbc16f961ba0",
      "properties": {
        "name": "rounds",
        "scope": "game"
      },
      "x": 153,
      "y": 3443,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "400c8ba9-b16a-411f-ab49-eefff9db99de": {
      "title": "0",
      "id": "400c8ba9-b16a-411f-ab49-eefff9db99de",
      "properties": {
        "value": 0,
        "number_type": "int"
      },
      "x": 53,
      "y": 3493,
      "width": 210,
      "height": 82,
      "collapsed": true,
      "inherited": false,
      "registry": "data/number/Make",
      "base_type": "core/Node"
    },
    "dfa58c02-0564-4110-b5f8-c95591d453a4": {
      "title": "Stage 100",
      "id": "dfa58c02-0564-4110-b5f8-c95591d453a4",
      "properties": {
        "stage": 100
      },
      "x": 924,
      "y": 3522,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "6fa8b9b5-49e7-4972-a13d-e73fdaacffc7": {
      "title": "Stage 101",
      "id": "6fa8b9b5-49e7-4972-a13d-e73fdaacffc7",
      "properties": {
        "stage": 101
      },
      "x": 504,
      "y": 3962,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "94bd0525-9ad6-455b-9cac-6d2b0192921b": {
      "title": "SET game.",
      "id": "94bd0525-9ad6-455b-9cac-6d2b0192921b",
      "properties": {
        "name": null,
        "scope": "game"
      },
      "x": 594,
      "y": 3442,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "bdba2ae6-4e0e-45b3-98d1-306e8c214ec8": {
      "title": "Increase",
      "id": "bdba2ae6-4e0e-45b3-98d1-306e8c214ec8",
      "properties": {
        "operation": "add",
        "a": 0,
        "b": "1"
      },
      "x": 414,
      "y": 3512,
      "width": 210,
      "height": 126,
      "collapsed": true,
      "inherited": false,
      "registry": "data/number/BasicArithmetic",
      "base_type": "core/Node"
    },
    "3d4baf70-0e43-48cf-80b5-6488326692ff": {
      "title": "Stage 1",
      "id": "3d4baf70-0e43-48cf-80b5-6488326692ff",
      "properties": {
        "stage": 1
      },
      "x": 1820,
      "y": 1160,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "583fa3f0-3ab3-4c24-ab6a-3b1054157314": {
      "title": "SET game.has_issued_instructions",
      "id": "583fa3f0-3ab3-4c24-ab6a-3b1054157314",
      "properties": {
        "name": "has_issued_instructions",
        "scope": "game"
      },
      "x": 1440,
      "y": 1440,
      "width": 296,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "3e849385-3762-40e5-8a17-121cece02062": {
      "title": "TRUE",
      "id": "3e849385-3762-40e5-8a17-121cece02062",
      "properties": {
        "value": true
      },
      "x": 1310,
      "y": 1490,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "18b9b2da-7b2e-429d-ad50-1930ed8f53a8": {
      "title": "SET game.last_processed_call",
      "id": "18b9b2da-7b2e-429d-ad50-1930ed8f53a8",
      "properties": {
        "name": "last_processed_call",
        "scope": "game"
      },
      "x": 960,
      "y": 1430,
      "width": 262,
      "height": 127,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "b9208cd7-da3d-4734-b8a2-0d2a97c97e20": {
      "title": "GET scene loop.user_message_id",
      "id": "b9208cd7-da3d-4734-b8a2-0d2a97c97e20",
      "properties": {
        "name": "user_message_id",
        "scope": "scene loop"
      },
      "x": 670,
      "y": 1430,
      "width": 257,
      "height": 124,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "2835f8a4-387e-40b5-afca-03f989c626bc": {
      "title": "Input Socket",
      "id": "2835f8a4-387e-40b5-afca-03f989c626bc",
      "properties": {
        "input_type": "any",
        "input_name": "state",
        "input_optional": false,
        "input_group": "",
        "num": 0
      },
      "x": 0,
      "y": -170,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "4fbb0e7a-2971-4380-a70f-bf3d5bac0614": {
      "title": "Output Socket",
      "id": "4fbb0e7a-2971-4380-a70f-bf3d5bac0614",
      "properties": {
        "output_type": "",
        "output_name": "state",
        "num": 0
      },
      "x": 1030,
      "y": -170,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "06bd4d5f-c6fd-4439-ac9b-a675f35d6d61": {
      "title": "Make Text",
      "id": "06bd4d5f-c6fd-4439-ac9b-a675f35d6d61",
      "properties": {
        "value": "The simulation computer has executed the following changes:\n\n```\n{simulation_stack}\n```\n\n\nGenerate the nessecary narration to encapsulate these actions."
      },
      "x": 760,
      "y": 3077,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    },
    "817edd7f-2862-4ee6-b1ed-ebdc9fece6c4": {
      "title": "GET scene loop.simulation_calls",
      "id": "817edd7f-2862-4ee6-b1ed-ebdc9fece6c4",
      "properties": {
        "name": "simulation_calls",
        "scope": "scene loop"
      },
      "x": 20,
      "y": 3000,
      "width": 281,
      "height": 129,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "632d4a0e-3327-409b-aaa4-ed38b932286b": {
      "title": "Make List",
      "id": "632d4a0e-3327-409b-aaa4-ed38b932286b",
      "properties": {
        "item_type": "str",
        "items": []
      },
      "x": 30,
      "y": 1160,
      "width": 211,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "data/MakeList",
      "base_type": "core/Node"
    },
    "4eb36f21-1020-4609-85e5-d16b42019c66": {
      "title": "AI Function Calling",
      "id": "4eb36f21-1020-4609-85e5-d16b42019c66",
      "properties": {
        "template": "computer",
        "max_calls": 5,
        "retries": 1,
        "response_length": 1408
      },
      "x": 1000,
      "y": 2581,
      "width": 210,
      "height": 230,
      "collapsed": false,
      "inherited": false,
      "registry": "focal/Focal",
      "base_type": "core/Node"
    }
  },
  "edges": {
    "259e4d35-c63c-4879-8f49-eecc5d3e5904.yes": [
      "6bbd61ae-e15b-4712-b2b2-fbfe6ac1f593.state"
    ],
    "6bbd61ae-e15b-4712-b2b2-fbfe6ac1f593.state": [
      "bd9f015c-f2fb-4030-861f-35bb0fe75778.state"
    ],
    "dbfa39cc-7e94-4417-89c1-9817a9fefb51.no": [
      "259e4d35-c63c-4879-8f49-eecc5d3e5904.a"
    ],
    "9a4d8aaa-be27-4069-890d-c9727eaddb42.result": [
      "259e4d35-c63c-4879-8f49-eecc5d3e5904.b"
    ],
    "39a5e426-948d-4c65-8e1f-a6301d648806.value": [
      "2cdd312f-e496-4b14-9d72-3f7baa21fd8a.description"
    ],
    "bc46a2cc-f43d-4663-a4da-0fc4ce671c70.scene": [
      "9f6a0861-899a-42ee-afe8-908fd3d22d02.object"
    ],
    "2cdd312f-e496-4b14-9d72-3f7baa21fd8a.content_context": [
      "9f6a0861-899a-42ee-afe8-908fd3d22d02.value"
    ],
    "9f6a0861-899a-42ee-afe8-908fd3d22d02.object": [
      "1ca5c8d6-e192-4d7e-b58e-5f2f339275d1.state"
    ],
    "5332d0b6-844b-4f7a-9247-8597fc2218d5.no": [
      "2cdd312f-e496-4b14-9d72-3f7baa21fd8a.state"
    ],
    "4d3bb32c-557c-441f-a97c-0058fe425bb3.list": [
      "d9715df8-780a-4927-bfad-cbb1719faad4.list"
    ],
    "482abc1b-d89e-4fae-a3db-5a8641bfece0.value": [
      "79db98f5-829c-4557-9a5d-893c7e0d8caf.default"
    ],
    "3b5f33aa-4f83-4558-8269-dcfe0e4d7ab2.callback": [
      "d9715df8-780a-4927-bfad-cbb1719faad4.item"
    ],
    "64956371-3d71-4c2f-9784-e20acdda7b14.fn": [
      "7255ed88-831c-4020-96f5-f7fa3f5b0692.fn"
    ],
    "7255ed88-831c-4020-96f5-f7fa3f5b0692.callback": [
      "00948669-9706-491a-bbaf-e261b3868871.item"
    ],
    "2aeeaf5d-3fac-4d3a-88ca-52db1315732b.fn": [
      "3b5f33aa-4f83-4558-8269-dcfe0e4d7ab2.fn"
    ],
    "4e6f35e4-4a83-422d-96c1-5509b288f825.fn": [
      "45a20e1f-ac8d-40e1-81ee-d72908e33fd8.fn"
    ],
    "d9715df8-780a-4927-bfad-cbb1719faad4.list": [
      "00948669-9706-491a-bbaf-e261b3868871.list"
    ],
    "f01c7a76-516c-4fed-90f3-843cff0efc02.list": [
      "5443ac95-59a4-4404-b439-0a78e988822b.list"
    ],
    "8986a373-6be2-4518-a59e-9af93376b8fd.callback": [
      "5443ac95-59a4-4404-b439-0a78e988822b.item"
    ],
    "5c1f1498-d649-47af-b539-85d243d2d426.fn": [
      "8986a373-6be2-4518-a59e-9af93376b8fd.fn"
    ],
    "00948669-9706-491a-bbaf-e261b3868871.list": [
      "f01c7a76-516c-4fed-90f3-843cff0efc02.list"
    ],
    "cc341c09-9cc5-4c88-a0ee-e7c6900ac8cb.value": [
      "4eb36f21-1020-4609-85e5-d16b42019c66.state"
    ],
    "d659e53b-05c0-4e45-99c3-4af8f02f986f.agent": [
      "4eb36f21-1020-4609-85e5-d16b42019c66.agent"
    ],
    "5443ac95-59a4-4404-b439-0a78e988822b.list": [
      "4c292c49-66fa-4340-8af6-5549db06a76a.list"
    ],
    "0ee60b86-36e8-4605-9bbe-ce8f93a0a874.callback": [
      "4c292c49-66fa-4340-8af6-5549db06a76a.item"
    ],
    "74c40ad0-3d33-4c2b-bc79-7a4f9ddb4a8b.fn": [
      "0ee60b86-36e8-4605-9bbe-ce8f93a0a874.fn"
    ],
    "f32b4a0b-13cb-4ccc-b465-a5a7299ef0e0.dict": [
      "4eb36f21-1020-4609-85e5-d16b42019c66.template_vars"
    ],
    "cf91d14b-fe91-4782-95de-ce1bc6ba1488.value": [
      "39a5e426-948d-4c65-8e1f-a6301d648806.object"
    ],
    "21f28ea1-ea2a-4667-b6d3-366d466540cd.value": [
      "5332d0b6-844b-4f7a-9247-8597fc2218d5.value"
    ],
    "79db98f5-829c-4557-9a5d-893c7e0d8caf.value": [
      "9a4d8aaa-be27-4069-890d-c9727eaddb42.b"
    ],
    "cf01e743-abd7-43a6-9fc1-2addee07c5db.value": [
      "9a4d8aaa-be27-4069-890d-c9727eaddb42.a"
    ],
    "5ac06e30-8dce-4d7a-954a-db8f3aed6265.value": [
      "dbfa39cc-7e94-4417-89c1-9817a9fefb51.value"
    ],
    "4c292c49-66fa-4340-8af6-5549db06a76a.list": [
      "048a2ad7-2d98-416f-aaa0-4075d63dc7c2.list"
    ],
    "ac44d63c-9984-401e-af09-ca2522305760.callback": [
      "048a2ad7-2d98-416f-aaa0-4075d63dc7c2.item"
    ],
    "0e9f928f-8a5b-4de2-8ac5-ed64b7dd4bff.fn": [
      "ac44d63c-9984-401e-af09-ca2522305760.fn"
    ],
    "b2b1f9c0-94e9-40f1-b323-bc365546fa6d.fn": [
      "8ca8daf3-1070-44a4-92ec-6c7d4b3f0b86.fn"
    ],
    "048a2ad7-2d98-416f-aaa0-4075d63dc7c2.list": [
      "09f907ad-cf11-4325-b6ff-f2d3e0605282.list"
    ],
    "8ca8daf3-1070-44a4-92ec-6c7d4b3f0b86.callback": [
      "09f907ad-cf11-4325-b6ff-f2d3e0605282.item"
    ],
    "09f907ad-cf11-4325-b6ff-f2d3e0605282.list": [
      "d45f07ff-c3ce-4aac-bae6-b9c77089cb69.list"
    ],
    "c7172353-eaf2-4db3-b29e-ae904c50d279.callback": [
      "d45f07ff-c3ce-4aac-bae6-b9c77089cb69.item"
    ],
    "10fb2431-92ad-4dca-b16a-d4091b85f0f3.fn": [
      "c7172353-eaf2-4db3-b29e-ae904c50d279.fn"
    ],
    "d45f07ff-c3ce-4aac-bae6-b9c77089cb69.list": [
      "4eb36f21-1020-4609-85e5-d16b42019c66.callbacks"
    ],
    "3da498c0-55de-4ec3-9943-6486279b9826.value": [
      "6d707f1c-af55-481a-970a-eb7a9f9c45dd.message"
    ],
    "6d707f1c-af55-481a-970a-eb7a9f9c45dd.message": [
      "dfa58c02-0564-4110-b5f8-c95591d453a4.state_b"
    ],
    "4398fb44-e718-4e41-9fbd-baa68bab3f9d.result": [
      "c5eff825-93b6-44e8-a5d7-f7b3791d5590.value"
    ],
    "d08ecd6b-8bff-43f9-b8d4-dc2a8b3449a7.length": [
      "4398fb44-e718-4e41-9fbd-baa68bab3f9d.a"
    ],
    "bd518119-5914-4d91-9df7-785e6d11e82f.result": [
      "662668b4-5722-4215-8299-e9cad9812751.value"
    ],
    "662668b4-5722-4215-8299-e9cad9812751.dict": [
      "9b424999-8a69-4c87-9aa5-c3a0ed6ac708.variables"
    ],
    "1476cf7e-654b-401a-8a0d-71dbe1971bee.message": [
      "e072a0d3-e87a-4156-84a7-02ffc75579c7.state"
    ],
    "06175a92-abbe-4483-9ab2-abaee2104728.name": [
      "3d4baf70-0e43-48cf-80b5-6488326692ff.state"
    ],
    "9b424999-8a69-4c87-9aa5-c3a0ed6ac708.result": [
      "32944b02-d2f9-45c0-a222-79facd994472.narrative_direction"
    ],
    "c5eff825-93b6-44e8-a5d7-f7b3791d5590.yes": [
      "32944b02-d2f9-45c0-a222-79facd994472.state"
    ],
    "32944b02-d2f9-45c0-a222-79facd994472.message": [
      "1476cf7e-654b-401a-8a0d-71dbe1971bee.message"
    ],
    "c5971215-ffce-44f2-a0ad-46571ebe83f8.emitted": [
      "6fa8b9b5-49e7-4972-a13d-e73fdaacffc7.state"
    ],
    "45a20e1f-ac8d-40e1-81ee-d72908e33fd8.callback": [
      "f01c7a76-516c-4fed-90f3-843cff0efc02.item"
    ],
    "aca80b8f-aff4-4c2b-a76e-e3f53106092e.emitted": [
      "3d4baf70-0e43-48cf-80b5-6488326692ff.state_b"
    ],
    "e9dd7fff-d43c-4ef4-8587-cbc16f961ba0.name": [
      "94bd0525-9ad6-455b-9cac-6d2b0192921b.name"
    ],
    "e9dd7fff-d43c-4ef4-8587-cbc16f961ba0.value": [
      "bdba2ae6-4e0e-45b3-98d1-306e8c214ec8.a"
    ],
    "400c8ba9-b16a-411f-ab49-eefff9db99de.value": [
      "e9dd7fff-d43c-4ef4-8587-cbc16f961ba0.default"
    ],
    "94bd0525-9ad6-455b-9cac-6d2b0192921b.name": [
      "dfa58c02-0564-4110-b5f8-c95591d453a4.state"
    ],
    "bdba2ae6-4e0e-45b3-98d1-306e8c214ec8.result": [
      "94bd0525-9ad6-455b-9cac-6d2b0192921b.value"
    ],
    "583fa3f0-3ab3-4c24-ab6a-3b1054157314.name": [
      "3d4baf70-0e43-48cf-80b5-6488326692ff.state_d"
    ],
    "3e849385-3762-40e5-8a17-121cece02062.value": [
      "583fa3f0-3ab3-4c24-ab6a-3b1054157314.value"
    ],
    "18b9b2da-7b2e-429d-ad50-1930ed8f53a8.name": [
      "3d4baf70-0e43-48cf-80b5-6488326692ff.state_c"
    ],
    "b9208cd7-da3d-4734-b8a2-0d2a97c97e20.value": [
      "18b9b2da-7b2e-429d-ad50-1930ed8f53a8.value"
    ],
    "2835f8a4-387e-40b5-afca-03f989c626bc.value": [
      "4fbb0e7a-2971-4380-a70f-bf3d5bac0614.value"
    ],
    "06bd4d5f-c6fd-4439-ac9b-a675f35d6d61.value": [
      "9b424999-8a69-4c87-9aa5-c3a0ed6ac708.template"
    ],
    "817edd7f-2862-4ee6-b1ed-ebdc9fece6c4.value": [
      "d08ecd6b-8bff-43f9-b8d4-dc2a8b3449a7.object",
      "bd518119-5914-4d91-9df7-785e6d11e82f.strings"
    ],
    "632d4a0e-3327-409b-aaa4-ed38b932286b.list": [
      "06175a92-abbe-4483-9ab2-abaee2104728.value"
    ],
    "4eb36f21-1020-4609-85e5-d16b42019c66.state": [
      "3008c0f4-105d-444a-8fde-0ac11a21f40c.state"
    ]
  },
  "groups": [
    {
      "title": "Stage -1",
      "x": 1,
      "y": 3,
      "width": 1241,
      "height": 629,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Stage 0 - First instruction - Generate content context",
      "x": 2,
      "y": 639,
      "width": 1347,
      "height": 423,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Stage 2 - Process instruction",
      "x": 1,
      "y": 1603,
      "width": 1419,
      "height": 1310,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Stage 1 - Reset simulation_calls stack",
      "x": 2,
      "y": 1071,
      "width": 2081,
      "height": 522,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Finalize",
      "x": 1,
      "y": 3353,
      "width": 1181,
      "height": 781,
      "color": "#8AA",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Stage 3 - Narrate stack",
      "x": 1,
      "y": 2919,
      "width": 1922,
      "height": 431,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    }
  ],
  "comments": [
    {
      "text": "Player message is not an instruction to the simulation computer.",
      "x": 373,
      "y": 180,
      "width": 200,
      "inherited": false
    },
    {
      "text": "Have we already processed this user message?",
      "x": 375,
      "y": 480,
      "width": 200,
      "inherited": false
    },
    {
      "text": "Once processed we don't want the instruction to the simulation show up in the context anymore.",
      "x": 411,
      "y": 3796,
      "width": 260,
      "inherited": false
    }
  ],
  "extends": null,
  "base_type": "core/Graph",
  "inputs": [],
  "outputs": [],
  "module_properties": {},
  "style": null
}