{
  "title": "Dynamic Storyline",
  "id": "c03c5512-0c2f-4cf8-9887-c813f6de1d52",
  "properties": {
    "event_name": "scene_loop_init"
  },
  "x": 0,
  "y": 0,
  "width": 200,
  "height": 100,
  "collapsed": false,
  "inherited": false,
  "registry": "scene/dynamicStoryline",
  "nodes": {
    "7c8b1e17-c5a4-4eb3-a1dc-d9b5ea782e6b": {
      "title": "UNSET game.intro_generated",
      "id": "7c8b1e17-c5a4-4eb3-a1dc-d9b5ea782e6b",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 733,
      "y": 1066,
      "width": 254,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "state/ConditionalUnsetState",
      "base_type": "core/Node"
    },
    "efc1c906-d725-4941-acab-a369366411d4": {
      "title": "SET local.reset",
      "id": "efc1c906-d725-4941-acab-a369366411d4",
      "properties": {
        "name": null,
        "scope": "local"
      },
      "x": 326,
      "y": -1299,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "2a4e0aed-e85a-4fba-ae30-630c71f91db9": {
      "title": "GET local.topic",
      "id": "2a4e0aed-e85a-4fba-ae30-630c71f91db9",
      "properties": {
        "name": "topic",
        "scope": "local"
      },
      "x": 26,
      "y": 1612,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "a14b3571-899f-47e6-90cd-6bf0fec6e4bb": {
      "title": "Set Introduction",
      "id": "a14b3571-899f-47e6-90cd-6bf0fec6e4bb",
      "properties": {
        "introduction": null,
        "emit_history": true
      },
      "x": 1048,
      "y": 1499,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/SetIntroduction",
      "base_type": "core/Node"
    },
    "7438bc9b-4b38-4c5c-a9a8-df5ebf098691": {
      "title": "Theme",
      "id": "7438bc9b-4b38-4c5c-a9a8-df5ebf098691",
      "properties": {},
      "x": 1108,
      "y": 1739,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "11965433-d217-47d1-bc37-8808426798ce": {
      "title": "Switch",
      "id": "11965433-d217-47d1-bc37-8808426798ce",
      "properties": {
        "pass_through": false
      },
      "x": 278,
      "y": 1469,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "4e9136e5-4557-4ef6-9124-9468d9e39815": {
      "title": "SET game.intro_generated",
      "id": "4e9136e5-4557-4ef6-9124-9468d9e39815",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 518,
      "y": 1549,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "37313611-7de1-478b-8840-e5ea7ba856fe": {
      "title": "GET game.intro_generated",
      "id": "37313611-7de1-478b-8840-e5ea7ba856fe",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 26,
      "y": 1422,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "91636e7d-d05b-4f5b-a234-6e4a1e6a6412": {
      "title": "Switch",
      "id": "91636e7d-d05b-4f5b-a234-6e4a1e6a6412",
      "properties": {
        "pass_through": false
      },
      "x": 275,
      "y": 662,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "4637ce9d-ac09-4f68-85d9-5e9ac9639d3d": {
      "title": "Stop",
      "id": "4637ce9d-ac09-4f68-85d9-5e9ac9639d3d",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 535,
      "y": 672,
      "width": 269,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "fef395e3-0ac9-48b0-827c-12e72ecaba1c": {
      "title": "true",
      "id": "fef395e3-0ac9-48b0-827c-12e72ecaba1c",
      "properties": {
        "value": true
      },
      "x": 526,
      "y": 308,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "01e1b94f-d738-4735-bdcd-5007c9293993": {
      "title": "GET game.intro_generated",
      "id": "01e1b94f-d738-4735-bdcd-5007c9293993",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 684,
      "y": 375,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "ab532597-ff81-43f7-9377-1db3b70d1edf": {
      "title": "NOT",
      "id": "ab532597-ff81-43f7-9377-1db3b70d1edf",
      "properties": {
        "pass_through": false
      },
      "x": 924,
      "y": 385,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "c17389b5-3203-4d51-ada4-62cf027cc0b0": {
      "title": "SET game.intro_generated",
      "id": "c17389b5-3203-4d51-ada4-62cf027cc0b0",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 1210,
      "y": 276,
      "width": 210,
      "height": 142,
      "collapsed": false,
      "inherited": false,
      "registry": "state/ConditionalSetState",
      "base_type": "core/Node"
    },
    "99f3eba0-1baa-4f59-af90-920e8e6c1e93": {
      "title": "AND Router",
      "id": "99f3eba0-1baa-4f59-af90-920e8e6c1e93",
      "properties": {},
      "x": 1040,
      "y": 286,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ANDRouter",
      "base_type": "core/Node"
    },
    "626e25be-9d1f-460a-9611-7adc1a1fb28f": {
      "title": "SET local.abort",
      "id": "626e25be-9d1f-460a-9611-7adc1a1fb28f",
      "properties": {
        "name": "abort",
        "scope": "local"
      },
      "x": 690,
      "y": 176,
      "width": 210,
      "height": 142,
      "collapsed": false,
      "inherited": false,
      "registry": "state/ConditionalSetState",
      "base_type": "core/Node"
    },
    "514bede6-cfda-42eb-8285-8c11181e62f6": {
      "title": "Emit Status (Conditional)",
      "id": "514bede6-cfda-42eb-8285-8c11181e62f6",
      "properties": {
        "message": "",
        "status": "error",
        "as_scene_message": true
      },
      "x": 1470,
      "y": 276,
      "width": 210,
      "height": 166,
      "collapsed": false,
      "inherited": false,
      "registry": "event/EmitStatusConditional",
      "base_type": "core/Node"
    },
    "c3398b66-a29a-4453-b17e-d9f8f5fb7efa": {
      "title": "Make Text",
      "id": "c3398b66-a29a-4453-b17e-d9f8f5fb7efa",
      "properties": {
        "value": "Scene already has history, cannot generate random story premise."
      },
      "x": 1210,
      "y": 476,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    },
    "afbb4f0a-5662-432b-9bc7-d30609a7d5a2": {
      "title": "Stage 2",
      "id": "afbb4f0a-5662-432b-9bc7-d30609a7d5a2",
      "properties": {
        "stage": 2
      },
      "x": 857,
      "y": 668,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "536380db-ae7a-4ab3-bc3f-c08a47896998": {
      "title": "Module Style",
      "id": "536380db-ae7a-4ab3-bc3f-c08a47896998",
      "properties": {
        "node_color": "#27233a",
        "title_color": "#3d315b",
        "auto_title": null,
        "icon": "F15D6"
      },
      "x": -230,
      "y": -1250,
      "width": 210,
      "height": 130,
      "collapsed": false,
      "inherited": false,
      "registry": "util/ModuleStyle",
      "base_type": "core/Node"
    },
    "907bc1c7-c19b-4a28-ba0c-c386bbfd0aa9": {
      "title": "GET local.analysis_instructions",
      "id": "907bc1c7-c19b-4a28-ba0c-c386bbfd0aa9",
      "properties": {
        "name": "analysis_instructions",
        "scope": "local"
      },
      "x": 30,
      "y": 1792,
      "width": 260,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "cc9ec8d5-64ce-4e16-b424-216aa12da8ca": {
      "title": "GET local.analysis_enabled",
      "id": "cc9ec8d5-64ce-4e16-b424-216aa12da8ca",
      "properties": {
        "name": "analysis_enabled",
        "scope": "local"
      },
      "x": 30,
      "y": 1972,
      "width": 250,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "a99989f1-d426-4195-9918-ac659bf24510": {
      "title": "GET local.intro_length",
      "id": "a99989f1-d426-4195-9918-ac659bf24510",
      "properties": {
        "name": "intro_length",
        "scope": "local"
      },
      "x": 30,
      "y": 2152,
      "width": 250,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "958c9db5-6df8-4d04-919d-c0a4b42fe3f8": {
      "title": "Generate Storyline",
      "id": "958c9db5-6df8-4d04-919d-c0a4b42fe3f8",
      "properties": {},
      "x": 770,
      "y": 1711,
      "width": 228,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/generateStoryline",
      "base_type": "core/Graph"
    },
    "ca241a90-daa3-40e4-9b7a-b857c334cd39": {
      "title": "Stage 4",
      "id": "ca241a90-daa3-40e4-9b7a-b857c334cd39",
      "properties": {
        "stage": 4
      },
      "x": 1310,
      "y": 1481,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "85be1eb8-f1ca-47c4-b30f-539a1c10dae3": {
      "title": "Set Introduction",
      "id": "85be1eb8-f1ca-47c4-b30f-539a1c10dae3",
      "properties": {
        "introduction": "",
        "emit_history": true
      },
      "x": 1019,
      "y": 1081,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/SetIntroduction",
      "base_type": "core/Node"
    },
    "2e3c7602-8673-47c3-9686-b92efb33aff4": {
      "title": "Switch",
      "id": "2e3c7602-8673-47c3-9686-b92efb33aff4",
      "properties": {
        "pass_through": false
      },
      "x": 266,
      "y": 1168,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "21050f79-592b-4213-be45-76261955994f": {
      "title": "GET game.intro_generated",
      "id": "21050f79-592b-4213-be45-76261955994f",
      "properties": {
        "name": "intro_generated",
        "scope": "game"
      },
      "x": 26,
      "y": 1168,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "a593c81a-25af-4199-abe6-884962c3492d": {
      "title": "GET local.reset",
      "id": "a593c81a-25af-4199-abe6-884962c3492d",
      "properties": {
        "name": "reset",
        "scope": "local"
      },
      "x": 26,
      "y": 948,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "e4eee8cc-10dc-4a04-9a77-d9598b202924": {
      "title": "Switch",
      "id": "e4eee8cc-10dc-4a04-9a77-d9598b202924",
      "properties": {
        "pass_through": true
      },
      "x": 276,
      "y": 968,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "0c73a403-ada1-45fa-ac3d-9a4890f4c9d0": {
      "title": "OR Router",
      "id": "0c73a403-ada1-45fa-ac3d-9a4890f4c9d0",
      "properties": {},
      "x": 546,
      "y": 1068,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ORRouter",
      "base_type": "core/Node"
    },
    "e601163e-fc37-4bd4-bffa-866f2ec6457e": {
      "title": "Stage 3",
      "id": "e601163e-fc37-4bd4-bffa-866f2ec6457e",
      "properties": {
        "stage": 3
      },
      "x": 1266,
      "y": 1078,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "c327b0c4-900e-4d27-a0b9-0d47e8479732": {
      "title": "SET local.analysis_instructions",
      "id": "c327b0c4-900e-4d27-a0b9-0d47e8479732",
      "properties": {
        "name": null,
        "scope": "local"
      },
      "x": 329,
      "y": -1040,
      "width": 260,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "4c8fe008-93ed-4f61-b6ec-3be96fbe2ebb": {
      "title": "SET local.analysis_enabled",
      "id": "4c8fe008-93ed-4f61-b6ec-3be96fbe2ebb",
      "properties": {
        "name": null,
        "scope": "local"
      },
      "x": 329,
      "y": -780,
      "width": 218,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "7c21ebae-d27c-4f08-b53c-24bbd7af8d4b": {
      "title": "SET local.topic",
      "id": "7c21ebae-d27c-4f08-b53c-24bbd7af8d4b",
      "properties": {
        "name": null,
        "scope": "local"
      },
      "x": 329,
      "y": -520,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "08309808-d1f1-4a94-9027-363eceed41d1": {
      "title": "Stage 0",
      "id": "08309808-d1f1-4a94-9027-363eceed41d1",
      "properties": {
        "stage": 0
      },
      "x": 739,
      "y": -890,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "def10ae9-f0f7-45a2-9fd6-42e58dc353ed": {
      "title": "SET local.intro_length",
      "id": "def10ae9-f0f7-45a2-9fd6-42e58dc353ed",
      "properties": {
        "name": null,
        "scope": "local"
      },
      "x": 359,
      "y": -250,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "880b6010-cdca-42d0-9dcb-58abecd31599": {
      "title": "Stage 0",
      "id": "880b6010-cdca-42d0-9dcb-58abecd31599",
      "properties": {
        "stage": 0
      },
      "x": 709,
      "y": -230,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "86df3111-98d7-46a1-aa1d-93e6c53e282b": {
      "title": "PROP analysis_enabled",
      "id": "86df3111-98d7-46a1-aa1d-93e6c53e282b",
      "properties": {
        "property_name": "analysis_enabled",
        "property_type": "bool",
        "default": "true",
        "choices": [],
        "description": "Theme analysis",
        "num": 2
      },
      "x": 29,
      "y": -780,
      "width": 258,
      "height": 198,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ModuleProperty",
      "base_type": "core/Node"
    },
    "43013315-b65d-4c51-bdab-fdffe051224f": {
      "title": "PROP reset",
      "id": "43013315-b65d-4c51-bdab-fdffe051224f",
      "properties": {
        "property_name": "reset",
        "property_type": "bool",
        "default": "false",
        "choices": [],
        "description": "Reset the introduction",
        "num": 4
      },
      "x": 26,
      "y": -1299,
      "width": 268,
      "height": 198,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ModuleProperty",
      "base_type": "core/Node"
    },
    "bb66531f-71dc-4ab5-820e-8b9d6059f450": {
      "title": "PROP intro_length",
      "id": "bb66531f-71dc-4ab5-820e-8b9d6059f450",
      "properties": {
        "property_name": "intro_length",
        "property_type": "int",
        "default": "512",
        "choices": [],
        "description": "Length of the introduction",
        "num": 1
      },
      "x": 39,
      "y": -250,
      "width": 252,
      "height": 198,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ModuleProperty",
      "base_type": "core/Node"
    },
    "6ffb6fe2-7f51-4ade-9dfa-b1f079bda6ff": {
      "title": "PROP topic",
      "id": "6ffb6fe2-7f51-4ade-9dfa-b1f079bda6ff",
      "properties": {
        "property_name": "topic",
        "property_type": "str",
        "default": "",
        "choices": [],
        "description": "The overarching topic - will be used to generate a theme that falls within this category. Example - 'Sci-fi adventure with cosmic horror'.",
        "num": 0
      },
      "x": 29,
      "y": -520,
      "width": 255,
      "height": 198,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ModuleProperty",
      "base_type": "core/Node"
    },
    "3f749c9f-71b0-4e9c-b99d-859e53f20569": {
      "title": "PROP analysis_instructions",
      "id": "3f749c9f-71b0-4e9c-b99d-859e53f20569",
      "properties": {
        "property_name": "analysis_instructions",
        "property_type": "text",
        "default": "",
        "choices": [],
        "description": "Additional instructions for topic analysis task - if topic analysis is enabled, this will be used to augment the topic analysis task with further instructions.",
        "num": 3
      },
      "x": 29,
      "y": -1040,
      "width": 259,
      "height": 198,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ModuleProperty",
      "base_type": "core/Node"
    },
    "2d28f380-7998-452a-be35-bdb0fc2367f5": {
      "title": "Has History",
      "id": "2d28f380-7998-452a-be35-bdb0fc2367f5",
      "properties": {},
      "x": 65,
      "y": 259,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/history/HasHistory",
      "base_type": "core/Node"
    },
    "be9bdeff-2232-4e00-894c-6476c4efdbc7": {
      "title": "Switch",
      "id": "be9bdeff-2232-4e00-894c-6476c4efdbc7",
      "properties": {
        "pass_through": false
      },
      "x": 265,
      "y": 249,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "07c15b6d-a275-4156-8f98-1759db36e4d0": {
      "title": "Stage 1",
      "id": "07c15b6d-a275-4156-8f98-1759db36e4d0",
      "properties": {
        "stage": 1
      },
      "x": 1714,
      "y": 265,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "912201d4-2678-45d4-a032-12707836c723": {
      "title": "GET local.abort",
      "id": "912201d4-2678-45d4-a032-12707836c723",
      "properties": {
        "name": "abort",
        "scope": "local"
      },
      "x": 30,
      "y": 644,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    }
  },
  "edges": {
    "7c8b1e17-c5a4-4eb3-a1dc-d9b5ea782e6b.state": [
      "85be1eb8-f1ca-47c4-b30f-539a1c10dae3.state"
    ],
    "efc1c906-d725-4941-acab-a369366411d4.value": [
      "08309808-d1f1-4a94-9027-363eceed41d1.state"
    ],
    "2a4e0aed-e85a-4fba-ae30-630c71f91db9.value": [
      "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.topic"
    ],
    "a14b3571-899f-47e6-90cd-6bf0fec6e4bb.state": [
      "ca241a90-daa3-40e4-9b7a-b857c334cd39.state"
    ],
    "11965433-d217-47d1-bc37-8808426798ce.no": [
      "a14b3571-899f-47e6-90cd-6bf0fec6e4bb.state",
      "4e9136e5-4557-4ef6-9124-9468d9e39815.value"
    ],
    "4e9136e5-4557-4ef6-9124-9468d9e39815.value": [
      "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.state"
    ],
    "37313611-7de1-478b-8840-e5ea7ba856fe.value": [
      "11965433-d217-47d1-bc37-8808426798ce.value"
    ],
    "91636e7d-d05b-4f5b-a234-6e4a1e6a6412.yes": [
      "4637ce9d-ac09-4f68-85d9-5e9ac9639d3d.state"
    ],
    "4637ce9d-ac09-4f68-85d9-5e9ac9639d3d.state": [
      "afbb4f0a-5662-432b-9bc7-d30609a7d5a2.state"
    ],
    "fef395e3-0ac9-48b0-827c-12e72ecaba1c.value": [
      "626e25be-9d1f-460a-9611-7adc1a1fb28f.value"
    ],
    "01e1b94f-d738-4735-bdcd-5007c9293993.value": [
      "ab532597-ff81-43f7-9377-1db3b70d1edf.value"
    ],
    "ab532597-ff81-43f7-9377-1db3b70d1edf.no": [
      "99f3eba0-1baa-4f59-af90-920e8e6c1e93.b"
    ],
    "c17389b5-3203-4d51-ada4-62cf027cc0b0.state": [
      "514bede6-cfda-42eb-8285-8c11181e62f6.state"
    ],
    "99f3eba0-1baa-4f59-af90-920e8e6c1e93.yes": [
      "c17389b5-3203-4d51-ada4-62cf027cc0b0.state",
      "c17389b5-3203-4d51-ada4-62cf027cc0b0.value"
    ],
    "626e25be-9d1f-460a-9611-7adc1a1fb28f.value": [
      "99f3eba0-1baa-4f59-af90-920e8e6c1e93.a"
    ],
    "514bede6-cfda-42eb-8285-8c11181e62f6.state": [
      "07c15b6d-a275-4156-8f98-1759db36e4d0.state"
    ],
    "c3398b66-a29a-4453-b17e-d9f8f5fb7efa.value": [
      "514bede6-cfda-42eb-8285-8c11181e62f6.message"
    ],
    "907bc1c7-c19b-4a28-ba0c-c386bbfd0aa9.value": [
      "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.analysis_instructions"
    ],
    "cc9ec8d5-64ce-4e16-b424-216aa12da8ca.value": [
      "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.analysis_enabled"
    ],
    "a99989f1-d426-4195-9918-ac659bf24510.value": [
      "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.intro_length"
    ],
    "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.text": [
      "a14b3571-899f-47e6-90cd-6bf0fec6e4bb.introduction"
    ],
    "958c9db5-6df8-4d04-919d-c0a4b42fe3f8.theme": [
      "7438bc9b-4b38-4c5c-a9a8-df5ebf098691.value"
    ],
    "85be1eb8-f1ca-47c4-b30f-539a1c10dae3.state": [
      "e601163e-fc37-4bd4-bffa-866f2ec6457e.state"
    ],
    "2e3c7602-8673-47c3-9686-b92efb33aff4.no": [
      "0c73a403-ada1-45fa-ac3d-9a4890f4c9d0.b"
    ],
    "21050f79-592b-4213-be45-76261955994f.value": [
      "2e3c7602-8673-47c3-9686-b92efb33aff4.value"
    ],
    "a593c81a-25af-4199-abe6-884962c3492d.value": [
      "e4eee8cc-10dc-4a04-9a77-d9598b202924.value"
    ],
    "e4eee8cc-10dc-4a04-9a77-d9598b202924.yes": [
      "0c73a403-ada1-45fa-ac3d-9a4890f4c9d0.a"
    ],
    "0c73a403-ada1-45fa-ac3d-9a4890f4c9d0.yes": [
      "7c8b1e17-c5a4-4eb3-a1dc-d9b5ea782e6b.state"
    ],
    "c327b0c4-900e-4d27-a0b9-0d47e8479732.value": [
      "08309808-d1f1-4a94-9027-363eceed41d1.state_b"
    ],
    "4c8fe008-93ed-4f61-b6ec-3be96fbe2ebb.value": [
      "08309808-d1f1-4a94-9027-363eceed41d1.state_c"
    ],
    "7c21ebae-d27c-4f08-b53c-24bbd7af8d4b.value": [
      "08309808-d1f1-4a94-9027-363eceed41d1.state_d"
    ],
    "def10ae9-f0f7-45a2-9fd6-42e58dc353ed.value": [
      "880b6010-cdca-42d0-9dcb-58abecd31599.state"
    ],
    "86df3111-98d7-46a1-aa1d-93e6c53e282b.name": [
      "4c8fe008-93ed-4f61-b6ec-3be96fbe2ebb.name"
    ],
    "86df3111-98d7-46a1-aa1d-93e6c53e282b.value": [
      "4c8fe008-93ed-4f61-b6ec-3be96fbe2ebb.value"
    ],
    "43013315-b65d-4c51-bdab-fdffe051224f.name": [
      "efc1c906-d725-4941-acab-a369366411d4.name"
    ],
    "43013315-b65d-4c51-bdab-fdffe051224f.value": [
      "efc1c906-d725-4941-acab-a369366411d4.value"
    ],
    "bb66531f-71dc-4ab5-820e-8b9d6059f450.name": [
      "def10ae9-f0f7-45a2-9fd6-42e58dc353ed.name"
    ],
    "bb66531f-71dc-4ab5-820e-8b9d6059f450.value": [
      "def10ae9-f0f7-45a2-9fd6-42e58dc353ed.value"
    ],
    "6ffb6fe2-7f51-4ade-9dfa-b1f079bda6ff.name": [
      "7c21ebae-d27c-4f08-b53c-24bbd7af8d4b.name"
    ],
    "6ffb6fe2-7f51-4ade-9dfa-b1f079bda6ff.value": [
      "7c21ebae-d27c-4f08-b53c-24bbd7af8d4b.value"
    ],
    "3f749c9f-71b0-4e9c-b99d-859e53f20569.name": [
      "c327b0c4-900e-4d27-a0b9-0d47e8479732.name"
    ],
    "3f749c9f-71b0-4e9c-b99d-859e53f20569.value": [
      "c327b0c4-900e-4d27-a0b9-0d47e8479732.value"
    ],
    "2d28f380-7998-452a-be35-bdb0fc2367f5.has_history": [
      "be9bdeff-2232-4e00-894c-6476c4efdbc7.value"
    ],
    "be9bdeff-2232-4e00-894c-6476c4efdbc7.yes": [
      "626e25be-9d1f-460a-9611-7adc1a1fb28f.state"
    ],
    "912201d4-2678-45d4-a032-12707836c723.value": [
      "91636e7d-d05b-4f5b-a234-6e4a1e6a6412.value"
    ]
  },
  "groups": [
    {
      "title": "Generate Premise - Stage 4",
      "x": 1,
      "y": 1318,
      "width": 1557,
      "height": 980,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Properties - Stage 0",
      "x": 1,
      "y": -1379,
      "width": 972,
      "height": 1352,
      "color": "#8AA",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Scene valid for randomized premise? - Stage 1",
      "x": 1,
      "y": -24,
      "width": 1947,
      "height": 583,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Reset - Stage 3",
      "x": 1,
      "y": 808,
      "width": 1500,
      "height": 507,
      "color": "#88A",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Abort - Stage 2",
      "x": 1,
      "y": 562,
      "width": 1149,
      "height": 243,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    }
  ],
  "comments": [
    {
      "text": "SetState here so we don't infinitely try to generate premise if something goes wrong.",
      "x": 518,
      "y": 1399,
      "width": 200,
      "inherited": false
    },
    {
      "text": "The scene already has a history, we set the abort flag.",
      "x": 700,
      "y": 56,
      "width": 200,
      "inherited": false
    },
    {
      "text": "If this is the first attempt to generate a dynamic premise ...",
      "x": 1000,
      "y": 166,
      "width": 200,
      "inherited": false
    },
    {
      "text": "... flag that an intro generation attempt was made ...",
      "x": 1220,
      "y": 166,
      "width": 200,
      "inherited": false
    },
    {
      "text": "... and send a notification to the user.",
      "x": 1470,
      "y": 176,
      "width": 200,
      "inherited": false
    },
    {
      "text": "When we are generating the first introduction OR when we are resetting the process: Remove the current introductory text.",
      "x": 546,
      "y": 888,
      "width": 200,
      "inherited": false
    },
    {
      "text": "Checking if the scene already has messages in its history.",
      "x": 45,
      "y": 139,
      "width": 343,
      "inherited": false
    },
    {
      "text": "When a scene already has meessages in its history it does not make sense to generate a new dynamic premise. At least in the current iteration of this module. So this stage checks for that and initiates the abort flag if needed.",
      "x": 37,
      "y": 434,
      "width": 408,
      "inherited": false
    }
  ],
  "extends": null,
  "base_type": "core/Event",
  "inputs": [],
  "outputs": [],
  "module_properties": {
    "topic": {
      "name": "topic",
      "description": "The overarching topic - will be used to generate a theme that falls within this category. Example - 'Sci-fi adventure with cosmic horror'.",
      "type": "str",
      "default": "",
      "choices": [],
      "readonly": false,
      "step": null,
      "min": null,
      "max": null,
      "ephemeral": false
    },
    "intro_length": {
      "name": "intro_length",
      "description": "Length of the introduction",
      "type": "int",
      "default": 512,
      "choices": [],
      "readonly": false,
      "step": null,
      "min": null,
      "max": null,
      "ephemeral": false
    },
    "analysis_enabled": {
      "name": "analysis_enabled",
      "description": "Theme analysis",
      "type": "bool",
      "default": true,
      "choices": [],
      "readonly": false,
      "step": null,
      "min": null,
      "max": null,
      "ephemeral": false
    },
    "analysis_instructions": {
      "name": "analysis_instructions",
      "description": "Additional instructions for topic analysis task - if topic analysis is enabled, this will be used to augment the topic analysis task with further instructions.",
      "type": "text",
      "default": "",
      "choices": [],
      "readonly": false,
      "step": null,
      "min": null,
      "max": null,
      "ephemeral": false
    },
    "reset": {
      "name": "reset",
      "description": "Reset the introduction",
      "type": "bool",
      "default": false,
      "choices": [],
      "readonly": false,
      "step": null,
      "min": null,
      "max": null,
      "ephemeral": false
    }
  },
  "style": {
    "title_color": "#3d315b",
    "node_color": "#27233a",
    "icon": "F15D6",
    "auto_title": null
  }
}