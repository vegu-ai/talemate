{
  "title": "Generate Premise",
  "id": "b9c310ea-90e2-4a93-bc76-e2ca255e65a6",
  "properties": {},
  "x": 0,
  "y": 0,
  "width": 200,
  "height": 100,
  "collapsed": false,
  "inherited": false,
  "registry": "scene/generatePremise",
  "nodes": {
    "ba261322-afc9-4d6d-be45-b071446d8f0e": {
      "title": "IN state",
      "id": "ba261322-afc9-4d6d-be45-b071446d8f0e",
      "properties": {
        "input_type": "any",
        "input_name": "state",
        "input_optional": false,
        "input_group": "",
        "num": 1
      },
      "x": 2165,
      "y": -491,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "83655997-bb35-4f8b-a5ff-eca5b78acfbe": {
      "title": "SET local.intro",
      "id": "83655997-bb35-4f8b-a5ff-eca5b78acfbe",
      "properties": {
        "name": "intro",
        "scope": "local"
      },
      "x": 1105,
      "y": 625,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "90484246-29a6-4dca-96a1-c8803376400d": {
      "title": "true",
      "id": "90484246-29a6-4dca-96a1-c8803376400d",
      "properties": {
        "value": true
      },
      "x": 511,
      "y": 594,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "90a21c0e-38af-4099-847e-2a0bfa1c7666": {
      "title": "Format",
      "id": "90a21c0e-38af-4099-847e-2a0bfa1c7666",
      "properties": {},
      "x": 585,
      "y": 772,
      "width": 140,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Format",
      "base_type": "core/Node"
    },
    "f9d2b981-75f4-49c9-a1bf-74e75424e0dc": {
      "title": "Dict Set",
      "id": "f9d2b981-75f4-49c9-a1bf-74e75424e0dc",
      "properties": {
        "key": ""
      },
      "x": 28,
      "y": 787,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "07ed0fd9-c6d1-42b3-8ebc-4f51a5cee477": {
      "title": "GET local.theme_analysis",
      "id": "07ed0fd9-c6d1-42b3-8ebc-4f51a5cee477",
      "properties": {
        "name": "theme_analysis",
        "scope": "local"
      },
      "x": -222,
      "y": 777,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "2af4bece-d324-4555-92cc-94432d9243b8": {
      "title": "GET local.theme",
      "id": "2af4bece-d324-4555-92cc-94432d9243b8",
      "properties": {
        "name": "theme",
        "scope": "local"
      },
      "x": -222,
      "y": 977,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "f2c5d29a-2309-4498-97bb-aa5fc8abe7c0": {
      "title": "Contextual Generate",
      "id": "f2c5d29a-2309-4498-97bb-aa5fc8abe7c0",
      "properties": {
        "context_type": "scene intro",
        "context_name": "general",
        "instructions": null,
        "length": 256,
        "character": null,
        "uid": null,
        "context_aware": true,
        "history_aware": true
      },
      "x": 850,
      "y": 626,
      "width": 237,
      "height": 406,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/creator/ContextualGenerate",
      "base_type": "core/Node"
    },
    "531c3abf-1827-4db2-a6d8-1daba3f05bbd": {
      "title": "GET local.topic",
      "id": "531c3abf-1827-4db2-a6d8-1daba3f05bbd",
      "properties": {
        "name": "topic",
        "scope": "local"
      },
      "x": -221,
      "y": -329,
      "width": 245,
      "height": 125,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "94603a9b-e6a5-4944-a621-558dd9395818": {
      "title": "Stage 1",
      "id": "94603a9b-e6a5-4944-a621-558dd9395818",
      "properties": {
        "stage": 1
      },
      "x": 1812,
      "y": -383,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "40d341e5-affa-4f3c-acae-7cebb556c1c6": {
      "title": "Random",
      "id": "40d341e5-affa-4f3c-acae-7cebb556c1c6",
      "properties": {
        "method": "choice",
        "min": 0,
        "max": 1,
        "mean": 0,
        "std_dev": 1
      },
      "x": 1132,
      "y": -483,
      "width": 210,
      "height": 234,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Random",
      "base_type": "core/Node"
    },
    "208eccc3-9eb8-4938-b182-ee9fa4626677": {
      "title": "Theme",
      "id": "208eccc3-9eb8-4938-b182-ee9fa4626677",
      "properties": {},
      "x": 1402,
      "y": -413,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "8fbb2ad2-2c28-44cb-bc40-f2a02bfa4e16": {
      "title": "Prompt From Template",
      "id": "8fbb2ad2-2c28-44cb-bc40-f2a02bfa4e16",
      "properties": {
        "scope": "scene",
        "template_file": "",
        "template_text": ""
      },
      "x": 289,
      "y": -419,
      "width": 210,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/PromptFromTemplate",
      "base_type": "core/Node"
    },
    "7422c62a-7655-454e-b6a4-2ed726cd8870": {
      "title": "Generate Thematic List",
      "id": "7422c62a-7655-454e-b6a4-2ed726cd8870",
      "properties": {
        "instructions": "",
        "iterations": 1
      },
      "x": 762,
      "y": -493,
      "width": 321,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/creator/GenerateThematicList",
      "base_type": "core/Node"
    },
    "4693f9aa-6489-4a36-a74c-8f9262baee5a": {
      "title": "Render Prompt",
      "id": "4693f9aa-6489-4a36-a74c-8f9262baee5a",
      "properties": {},
      "x": 549,
      "y": -349,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/RenderPrompt",
      "base_type": "core/Node"
    },
    "de75cf1f-f2e6-4f88-ad8e-77ca2d35ea74": {
      "title": "SET local.theme",
      "id": "de75cf1f-f2e6-4f88-ad8e-77ca2d35ea74",
      "properties": {
        "name": "theme",
        "scope": "local"
      },
      "x": 1567,
      "y": -399,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "53be9345-9126-4012-916a-014eb0004101": {
      "title": "true",
      "id": "53be9345-9126-4012-916a-014eb0004101",
      "properties": {
        "value": true
      },
      "x": 626,
      "y": -461,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "bd8fa024-ef74-45be-9ba4-fc3b99790772": {
      "title": "Template Variables",
      "id": "bd8fa024-ef74-45be-9ba4-fc3b99790772",
      "properties": {},
      "x": 846,
      "y": 229,
      "width": 170,
      "height": 46,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/TemplateVariables",
      "base_type": "core/Node"
    },
    "8841e87b-e372-482f-b58f-e0a892e1b7b9": {
      "title": "Prompt From Template",
      "id": "8841e87b-e372-482f-b58f-e0a892e1b7b9",
      "properties": {
        "scope": "scene",
        "template_file": "",
        "template_text": ""
      },
      "x": 1086,
      "y": 319,
      "width": 210,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/PromptFromTemplate",
      "base_type": "core/Node"
    },
    "b3a2a89e-d3ef-4921-aac1-e464451f5347": {
      "title": "SET local.theme_analysis",
      "id": "b3a2a89e-d3ef-4921-aac1-e464451f5347",
      "properties": {
        "name": "theme_analysis",
        "scope": "local"
      },
      "x": 1646,
      "y": 189,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "b13e3c4b-7df7-450e-b7b5-a96d7b4bd0dd": {
      "title": "Stage 2",
      "id": "b13e3c4b-7df7-450e-b7b5-a96d7b4bd0dd",
      "properties": {
        "stage": 2
      },
      "x": 1896,
      "y": 189,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "b0f1ff55-d727-4055-8e2d-cd3a267f8164": {
      "title": "summarizer",
      "id": "b0f1ff55-d727-4055-8e2d-cd3a267f8164",
      "properties": {
        "agent_name": "summarizer"
      },
      "x": 521,
      "y": 144,
      "width": 230,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/GetAgent",
      "base_type": "core/Node"
    },
    "277e5de6-e128-4675-b80b-a212149e3fd0": {
      "title": "Dict Set",
      "id": "277e5de6-e128-4675-b80b-a212149e3fd0",
      "properties": {
        "key": ""
      },
      "x": 516,
      "y": 269,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "0f4128ac-8840-463a-8348-4f003fe0b6fe": {
      "title": "Dict Set",
      "id": "0f4128ac-8840-463a-8348-4f003fe0b6fe",
      "properties": {
        "key": ""
      },
      "x": 276,
      "y": 99,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "cd5dda3f-42d6-41ff-abb7-91c4b97de6af": {
      "title": "Dict Set",
      "id": "cd5dda3f-42d6-41ff-abb7-91c4b97de6af",
      "properties": {
        "key": ""
      },
      "x": 26,
      "y": -81,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "42227ab2-9ef4-4760-9486-fc23c06a50e3": {
      "title": "GET local.theme",
      "id": "42227ab2-9ef4-4760-9486-fc23c06a50e3",
      "properties": {
        "name": "theme",
        "scope": "local"
      },
      "x": -214,
      "y": -91,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "7ab85266-2ce1-4434-8a32-e76710b97a88": {
      "title": "GET local.analysis_instructions",
      "id": "7ab85266-2ce1-4434-8a32-e76710b97a88",
      "properties": {
        "name": "analysis_instructions",
        "scope": "local"
      },
      "x": -219,
      "y": 114,
      "width": 260,
      "height": 126,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "2d8aab05-4563-4ac6-8242-2171be615b16": {
      "title": "GET local.topic",
      "id": "2d8aab05-4563-4ac6-8242-2171be615b16",
      "properties": {
        "name": "topic",
        "scope": "local"
      },
      "x": -223,
      "y": 292,
      "width": 260,
      "height": 126,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "085729eb-fefb-4490-9e39-1aafca07289f": {
      "title": "Generate Response",
      "id": "085729eb-fefb-4490-9e39-1aafca07289f",
      "properties": {
        "data_output": false,
        "response_length": 1024,
        "action_type": "analyze",
        "attempts": 1
      },
      "x": 1370,
      "y": 178,
      "width": 251,
      "height": 190,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/GenerateResponse",
      "base_type": "core/Node"
    },
    "2ad9c727-c61b-402b-a11c-e7d7f1f4b322": {
      "title": "GET local.analysis_enabled",
      "id": "2ad9c727-c61b-402b-a11c-e7d7f1f4b322",
      "properties": {
        "name": "analysis_enabled",
        "scope": "local"
      },
      "x": 860,
      "y": 39,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "17ac652c-fb77-43ec-9184-2ad84cd4ae1e": {
      "title": "Switch",
      "id": "17ac652c-fb77-43ec-9184-2ad84cd4ae1e",
      "properties": {
        "pass_through": false
      },
      "x": 1100,
      "y": 79,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "d83755ec-46f4-4d0d-9f03-45e4c9f0baf6": {
      "title": "GET local.intro",
      "id": "d83755ec-46f4-4d0d-9f03-45e4c9f0baf6",
      "properties": {
        "name": "intro",
        "scope": "local"
      },
      "x": 2170,
      "y": -250,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "e50adef8-badf-4c69-ad16-10abf540f21b": {
      "title": "GET local.theme",
      "id": "e50adef8-badf-4c69-ad16-10abf540f21b",
      "properties": {
        "name": "theme",
        "scope": "local"
      },
      "x": 2170,
      "y": -30,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "eb68c23f-72be-4115-95ca-1f7b212b16f5": {
      "title": "OUT state",
      "id": "eb68c23f-72be-4115-95ca-1f7b212b16f5",
      "properties": {
        "output_type": "any",
        "output_name": "state",
        "num": 0
      },
      "x": 2440,
      "y": -490,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "16f6c12f-22ca-4ff5-86f1-6f605cdb98a7": {
      "title": "OUT text",
      "id": "16f6c12f-22ca-4ff5-86f1-6f605cdb98a7",
      "properties": {
        "output_type": "str",
        "output_name": "text",
        "num": 1
      },
      "x": 2440,
      "y": -250,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "6bed1f60-8b79-41c0-a8e7-bb8a157c0f32": {
      "title": "OUT theme",
      "id": "6bed1f60-8b79-41c0-a8e7-bb8a157c0f32",
      "properties": {
        "output_type": "str",
        "output_name": "theme",
        "num": 2
      },
      "x": 2450,
      "y": -30,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "8627e3dc-6ad8-42ed-84fc-8d793fbfd85c": {
      "title": "IN topic",
      "id": "8627e3dc-6ad8-42ed-84fc-8d793fbfd85c",
      "properties": {
        "input_type": "str",
        "input_name": "topic",
        "input_optional": false,
        "input_group": "",
        "num": 1
      },
      "x": -1393,
      "y": -493,
      "width": 252,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "08e99d86-5908-4959-8b37-c6f64344ab45": {
      "title": "SET local.topic",
      "id": "08e99d86-5908-4959-8b37-c6f64344ab45",
      "properties": {
        "name": "topic",
        "scope": "local"
      },
      "x": -1083,
      "y": -483,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "c365a4a9-fcdb-4c43-8fa5-4502674663e4": {
      "title": "IN analysis_instructions",
      "id": "c365a4a9-fcdb-4c43-8fa5-4502674663e4",
      "properties": {
        "input_type": "str",
        "input_name": "analysis_instructions",
        "input_optional": true,
        "input_group": "",
        "num": 1
      },
      "x": -1393,
      "y": -253,
      "width": 252,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "e2340346-3737-4f94-927f-4cef3f517647": {
      "title": "SET local.analysis_instructions",
      "id": "e2340346-3737-4f94-927f-4cef3f517647",
      "properties": {
        "name": "analysis_instructions",
        "scope": "local"
      },
      "x": -1103,
      "y": -253,
      "width": 260,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "17bccdda-7546-4a60-9492-c95bcc8cf9cf": {
      "title": "IN analysis_enabled",
      "id": "17bccdda-7546-4a60-9492-c95bcc8cf9cf",
      "properties": {
        "input_type": "bool",
        "input_name": "analysis_enabled",
        "input_optional": true,
        "input_group": "",
        "num": 1
      },
      "x": -1392,
      "y": -12,
      "width": 252,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "931767d1-0a60-48a0-b754-7189573dcfe8": {
      "title": "SET local.analysis_enabled",
      "id": "931767d1-0a60-48a0-b754-7189573dcfe8",
      "properties": {
        "name": "analysis_enabled",
        "scope": "local"
      },
      "x": -847,
      "y": -13,
      "width": 260,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "2629c91a-74d2-4c25-962d-f1b74163147b": {
      "title": "As Bool",
      "id": "2629c91a-74d2-4c25-962d-f1b74163147b",
      "properties": {
        "default": true
      },
      "x": -1087,
      "y": 7,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "core/AsBool",
      "base_type": "core/Node"
    },
    "290d821f-6be9-4130-9965-4f0823342725": {
      "title": "Instructions",
      "id": "290d821f-6be9-4130-9965-4f0823342725",
      "properties": {
        "value": "A list of topics to use for brain storming. The overarching theme is described as \"{{ topic }}\". Keep each item short (1-3 words). One of these items will be chosen to bootstrap a new story line."
      },
      "x": -224,
      "y": -461,
      "width": 237,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    },
    "a3de6cce-c44f-4cd7-b4c2-511baf2e0dbf": {
      "title": "Theme Analysis Template",
      "id": "a3de6cce-c44f-4cd7-b4c2-511baf2e0dbf",
      "properties": {
        "value": "<|SECTION:STORY BASELINE|>\n{{ scene.description }}\n\n<|SECTION:PROTAGONISTS|>\n{% for character in scene.characters %}\n### {{ character.name }}\n{{ character.description }}\n{% endfor %}\n\n<|SECTION:CONTEXT OF YOUR TASK|>\nA topic description of \"{{ topic }}\" was given and a random theme was picked to bootstrap a new storyline: \"{{ theme }}\".\n\n<|SECTION:TASK|>\nAnalyze the theme \"{{ theme }}\" in the context of the topic \"{{ topic }}\".\n\nProvide a brief exploration of this theme, including:\n1. Key concepts or ideas involved and how they fit the context\n2. Potential storylines or conflicts\n3. How it might affect the protagonists of the story\n\n{% if analysis_instructions %}\n{{ analysis_instructions }}\n{% endif %}\n\nKeep your analysis concise and to the point.\n\nYour analysis will be used to set up the premise for the next storyline in the `{{ scene.name }}` series."
      },
      "x": 516,
      "y": 429,
      "width": 300,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    },
    "6c50e530-c90a-4c31-83bb-ce6dacc459b8": {
      "title": "Stage -1",
      "id": "6c50e530-c90a-4c31-83bb-ce6dacc459b8",
      "properties": {
        "stage": -1
      },
      "x": -505,
      "y": -232,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "ece4f875-661f-4aea-8392-3c12c920bfe1": {
      "title": "Module Style",
      "id": "ece4f875-661f-4aea-8392-3c12c920bfe1",
      "properties": {
        "node_color": "#392c34",
        "title_color": "#572e44",
        "auto_title": null,
        "icon": "F1719"
      },
      "x": -223,
      "y": -749,
      "width": 210,
      "height": 130,
      "collapsed": false,
      "inherited": false,
      "registry": "util/ModuleStyle",
      "base_type": "core/Node"
    },
    "8f405443-0bd3-419d-8122-66225592e716": {
      "title": "Emit Status",
      "id": "8f405443-0bd3-419d-8122-66225592e716",
      "properties": {
        "message": "Generating a new story line",
        "status": "busy",
        "as_scene_message": true
      },
      "x": 9,
      "y": -749,
      "width": 282,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "event/EmitStatus",
      "base_type": "core/Node"
    },
    "69332967-7ac9-4940-b7f4-7a77d2333f05": {
      "title": "Stage 0",
      "id": "69332967-7ac9-4940-b7f4-7a77d2333f05",
      "properties": {
        "stage": 0
      },
      "x": 320,
      "y": -750,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "08e3d297-9342-40e6-9ddc-f86283d8728a": {
      "title": "Dict Set",
      "id": "08e3d297-9342-40e6-9ddc-f86283d8728a",
      "properties": {
        "key": null
      },
      "x": 49,
      "y": -339,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "9fdaeabc-3e18-41d3-95c3-772bff339631": {
      "title": "Emit Status",
      "id": "9fdaeabc-3e18-41d3-95c3-772bff339631",
      "properties": {
        "message": "Something went wrong.",
        "status": "error",
        "as_scene_message": true
      },
      "x": -1093,
      "y": 255,
      "width": 270,
      "height": 153,
      "collapsed": false,
      "inherited": false,
      "registry": "event/EmitStatus",
      "base_type": "core/Node"
    },
    "e29ef945-bb69-473f-b7a1-d30a3669089f": {
      "title": "Stop",
      "id": "e29ef945-bb69-473f-b7a1-d30a3669089f",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": -780,
      "y": 257,
      "width": 260,
      "height": 79,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "f7b9fa16-c3ed-4c8c-8624-1b79a5bdf1d1": {
      "title": "FN error_handler",
      "id": "f7b9fa16-c3ed-4c8c-8624-1b79a5bdf1d1",
      "properties": {
        "name": "error_handler"
      },
      "x": -1080,
      "y": 493,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "core/functions/GetFunction",
      "base_type": "core/Node"
    },
    "db09225b-d9ef-4c3c-b4ab-61c4a034d345": {
      "title": "DEF error_handler",
      "id": "db09225b-d9ef-4c3c-b4ab-61c4a034d345",
      "properties": {
        "name": "error_handler"
      },
      "x": -488,
      "y": 257,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/functions/DefineFunction",
      "base_type": "core/Node"
    },
    "396c90e5-9aee-4edd-b952-a26505362aff": {
      "title": "Error Handler",
      "id": "396c90e5-9aee-4edd-b952-a26505362aff",
      "properties": {},
      "x": -831,
      "y": 499,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ErrorHandler",
      "base_type": "core/Node"
    },
    "6ab6598b-151d-44ef-920f-0810f6da88b5": {
      "title": "Contextual Generate",
      "id": "6ab6598b-151d-44ef-920f-0810f6da88b5",
      "properties": {
        "context_type": "scene intent",
        "context_name": "overall",
        "instructions": null,
        "length": 256,
        "character": null,
        "uid": null,
        "context_aware": true,
        "history_aware": true
      },
      "x": 488,
      "y": 1236,
      "width": 237,
      "height": 406,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/creator/ContextualGenerate",
      "base_type": "core/Node"
    },
    "44bf83e8-c6b9-4c45-8dd6-e22aedff879b": {
      "title": "Set Scene Intent",
      "id": "44bf83e8-c6b9-4c45-8dd6-e22aedff879b",
      "properties": {
        "intent": ""
      },
      "x": 778,
      "y": 1236,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/intention/SetSceneIntent",
      "base_type": "core/Node"
    },
    "78329395-ffe5-4683-9642-debc07203bdb": {
      "title": "Dict Set",
      "id": "78329395-ffe5-4683-9642-debc07203bdb",
      "properties": {
        "key": "theme"
      },
      "x": 295,
      "y": 852,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/DictSet",
      "base_type": "core/Node"
    },
    "6f662764-4a83-4db4-a350-d24224efd36b": {
      "title": "SET local.template_variables",
      "id": "6f662764-4a83-4db4-a350-d24224efd36b",
      "properties": {
        "name": "template_variables",
        "scope": "local"
      },
      "x": 549,
      "y": 910,
      "width": 235,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "fc181553-db26-4666-a679-afd5edfd4ab5": {
      "title": "Stage 3",
      "id": "fc181553-db26-4666-a679-afd5edfd4ab5",
      "properties": {
        "stage": 3
      },
      "x": 1339,
      "y": 650,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "55979f0a-d3c9-4a76-960f-7ac0f3fcd76a": {
      "title": "Prompt From Template",
      "id": "55979f0a-d3c9-4a76-960f-7ac0f3fcd76a",
      "properties": {
        "scope": "scene",
        "template_file": "",
        "template_text": ""
      },
      "x": 48,
      "y": 1400,
      "width": 210,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/PromptFromTemplate",
      "base_type": "core/Node"
    },
    "fd2c09be-8994-49a3-98b8-d7d3e2304aa2": {
      "title": "Stage 4",
      "id": "fd2c09be-8994-49a3-98b8-d7d3e2304aa2",
      "properties": {
        "stage": 4
      },
      "x": 1028,
      "y": 1240,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "ea9bf575-80e1-4296-9f52-c3e0d79a6335": {
      "title": "Render Prompt",
      "id": "ea9bf575-80e1-4296-9f52-c3e0d79a6335",
      "properties": {},
      "x": 288,
      "y": 1400,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/RenderPrompt",
      "base_type": "core/Node"
    },
    "b2b78f64-c308-470a-a492-9f8e605208a9": {
      "title": "GET local.template_variables",
      "id": "b2b78f64-c308-470a-a492-9f8e605208a9",
      "properties": {
        "name": "template_variables",
        "scope": "local"
      },
      "x": -218,
      "y": 1510,
      "width": 235,
      "height": 125,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "d4017f75-26f2-4220-ab5a-c0bf769063f0": {
      "title": "true",
      "id": "d4017f75-26f2-4220-ab5a-c0bf769063f0",
      "properties": {
        "value": true
      },
      "x": 342,
      "y": 1260,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "a9e0118c-f630-4723-9a09-af0c45b42b53": {
      "title": "Make Text",
      "id": "a9e0118c-f630-4723-9a09-af0c45b42b53",
      "properties": {
        "value": "Take this analysis of the theme into consideration when creating the story intent:\n\n\n{{ theme_analysis }}"
      },
      "x": -210,
      "y": 1340,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    },
    "1937cd37-346a-4c39-be5c-5033bbf9e09e": {
      "title": "Instruction Template",
      "id": "1937cd37-346a-4c39-be5c-5033bbf9e09e",
      "properties": {
        "value": "Generate the introduction to a random exciting story-line.\n\nThe theme is: \"{theme}\"\n\nUse the following analysis to guide your creation of the scenario premise:\n\n{theme_analysis}"
      },
      "x": 279,
      "y": 730,
      "width": 272,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/MakeText",
      "base_type": "core/Node"
    }
  },
  "edges": {
    "ba261322-afc9-4d6d-be45-b071446d8f0e.value": [
      "eb68c23f-72be-4115-95ca-1f7b212b16f5.value"
    ],
    "83655997-bb35-4f8b-a5ff-eca5b78acfbe.value": [
      "fc181553-db26-4666-a679-afd5edfd4ab5.state"
    ],
    "90484246-29a6-4dca-96a1-c8803376400d.value": [
      "f2c5d29a-2309-4498-97bb-aa5fc8abe7c0.state"
    ],
    "90a21c0e-38af-4099-847e-2a0bfa1c7666.result": [
      "f2c5d29a-2309-4498-97bb-aa5fc8abe7c0.instructions"
    ],
    "f9d2b981-75f4-49c9-a1bf-74e75424e0dc.dict": [
      "78329395-ffe5-4683-9642-debc07203bdb.dict"
    ],
    "07ed0fd9-c6d1-42b3-8ebc-4f51a5cee477.name": [
      "f9d2b981-75f4-49c9-a1bf-74e75424e0dc.key"
    ],
    "07ed0fd9-c6d1-42b3-8ebc-4f51a5cee477.value": [
      "f9d2b981-75f4-49c9-a1bf-74e75424e0dc.value"
    ],
    "2af4bece-d324-4555-92cc-94432d9243b8.name": [
      "78329395-ffe5-4683-9642-debc07203bdb.key"
    ],
    "2af4bece-d324-4555-92cc-94432d9243b8.value": [
      "78329395-ffe5-4683-9642-debc07203bdb.value"
    ],
    "f2c5d29a-2309-4498-97bb-aa5fc8abe7c0.text": [
      "83655997-bb35-4f8b-a5ff-eca5b78acfbe.value"
    ],
    "531c3abf-1827-4db2-a6d8-1daba3f05bbd.name": [
      "08e3d297-9342-40e6-9ddc-f86283d8728a.key"
    ],
    "531c3abf-1827-4db2-a6d8-1daba3f05bbd.value": [
      "08e3d297-9342-40e6-9ddc-f86283d8728a.value"
    ],
    "40d341e5-affa-4f3c-acae-7cebb556c1c6.result": [
      "208eccc3-9eb8-4938-b182-ee9fa4626677.value"
    ],
    "208eccc3-9eb8-4938-b182-ee9fa4626677.value": [
      "de75cf1f-f2e6-4f88-ad8e-77ca2d35ea74.value"
    ],
    "8fbb2ad2-2c28-44cb-bc40-f2a02bfa4e16.prompt": [
      "4693f9aa-6489-4a36-a74c-8f9262baee5a.prompt"
    ],
    "7422c62a-7655-454e-b6a4-2ed726cd8870.list": [
      "40d341e5-affa-4f3c-acae-7cebb556c1c6.choices"
    ],
    "4693f9aa-6489-4a36-a74c-8f9262baee5a.rendered": [
      "7422c62a-7655-454e-b6a4-2ed726cd8870.instructions"
    ],
    "de75cf1f-f2e6-4f88-ad8e-77ca2d35ea74.value": [
      "94603a9b-e6a5-4944-a621-558dd9395818.state"
    ],
    "53be9345-9126-4012-916a-014eb0004101.value": [
      "7422c62a-7655-454e-b6a4-2ed726cd8870.state"
    ],
    "bd8fa024-ef74-45be-9ba4-fc3b99790772.variables": [
      "8841e87b-e372-482f-b58f-e0a892e1b7b9.variables"
    ],
    "bd8fa024-ef74-45be-9ba4-fc3b99790772.agent": [
      "085729eb-fefb-4490-9e39-1aafca07289f.agent"
    ],
    "8841e87b-e372-482f-b58f-e0a892e1b7b9.prompt": [
      "085729eb-fefb-4490-9e39-1aafca07289f.prompt"
    ],
    "b3a2a89e-d3ef-4921-aac1-e464451f5347.value": [
      "b13e3c4b-7df7-450e-b7b5-a96d7b4bd0dd.state"
    ],
    "b0f1ff55-d727-4055-8e2d-cd3a267f8164.agent": [
      "bd8fa024-ef74-45be-9ba4-fc3b99790772.agent"
    ],
    "277e5de6-e128-4675-b80b-a212149e3fd0.dict": [
      "bd8fa024-ef74-45be-9ba4-fc3b99790772.merge_with"
    ],
    "0f4128ac-8840-463a-8348-4f003fe0b6fe.dict": [
      "277e5de6-e128-4675-b80b-a212149e3fd0.dict"
    ],
    "cd5dda3f-42d6-41ff-abb7-91c4b97de6af.dict": [
      "0f4128ac-8840-463a-8348-4f003fe0b6fe.dict"
    ],
    "42227ab2-9ef4-4760-9486-fc23c06a50e3.name": [
      "cd5dda3f-42d6-41ff-abb7-91c4b97de6af.key"
    ],
    "42227ab2-9ef4-4760-9486-fc23c06a50e3.value": [
      "cd5dda3f-42d6-41ff-abb7-91c4b97de6af.value"
    ],
    "7ab85266-2ce1-4434-8a32-e76710b97a88.name": [
      "0f4128ac-8840-463a-8348-4f003fe0b6fe.key"
    ],
    "7ab85266-2ce1-4434-8a32-e76710b97a88.value": [
      "0f4128ac-8840-463a-8348-4f003fe0b6fe.value"
    ],
    "2d8aab05-4563-4ac6-8242-2171be615b16.name": [
      "277e5de6-e128-4675-b80b-a212149e3fd0.key"
    ],
    "2d8aab05-4563-4ac6-8242-2171be615b16.value": [
      "277e5de6-e128-4675-b80b-a212149e3fd0.value"
    ],
    "085729eb-fefb-4490-9e39-1aafca07289f.response": [
      "b3a2a89e-d3ef-4921-aac1-e464451f5347.value"
    ],
    "2ad9c727-c61b-402b-a11c-e7d7f1f4b322.value": [
      "17ac652c-fb77-43ec-9184-2ad84cd4ae1e.value"
    ],
    "17ac652c-fb77-43ec-9184-2ad84cd4ae1e.yes": [
      "085729eb-fefb-4490-9e39-1aafca07289f.state"
    ],
    "d83755ec-46f4-4d0d-9f03-45e4c9f0baf6.value": [
      "16f6c12f-22ca-4ff5-86f1-6f605cdb98a7.value"
    ],
    "e50adef8-badf-4c69-ad16-10abf540f21b.value": [
      "6bed1f60-8b79-41c0-a8e7-bb8a157c0f32.value"
    ],
    "8627e3dc-6ad8-42ed-84fc-8d793fbfd85c.value": [
      "08e99d86-5908-4959-8b37-c6f64344ab45.value"
    ],
    "08e99d86-5908-4959-8b37-c6f64344ab45.value": [
      "6c50e530-c90a-4c31-83bb-ce6dacc459b8.state"
    ],
    "c365a4a9-fcdb-4c43-8fa5-4502674663e4.value": [
      "e2340346-3737-4f94-927f-4cef3f517647.value"
    ],
    "e2340346-3737-4f94-927f-4cef3f517647.value": [
      "6c50e530-c90a-4c31-83bb-ce6dacc459b8.state_b"
    ],
    "17bccdda-7546-4a60-9492-c95bcc8cf9cf.value": [
      "2629c91a-74d2-4c25-962d-f1b74163147b.value"
    ],
    "931767d1-0a60-48a0-b754-7189573dcfe8.value": [
      "6c50e530-c90a-4c31-83bb-ce6dacc459b8.state_c"
    ],
    "2629c91a-74d2-4c25-962d-f1b74163147b.value": [
      "931767d1-0a60-48a0-b754-7189573dcfe8.value"
    ],
    "290d821f-6be9-4130-9965-4f0823342725.value": [
      "8fbb2ad2-2c28-44cb-bc40-f2a02bfa4e16.template_text"
    ],
    "a3de6cce-c44f-4cd7-b4c2-511baf2e0dbf.value": [
      "8841e87b-e372-482f-b58f-e0a892e1b7b9.template_text"
    ],
    "8f405443-0bd3-419d-8122-66225592e716.emitted": [
      "69332967-7ac9-4940-b7f4-7a77d2333f05.state_b"
    ],
    "08e3d297-9342-40e6-9ddc-f86283d8728a.dict": [
      "8fbb2ad2-2c28-44cb-bc40-f2a02bfa4e16.variables"
    ],
    "9fdaeabc-3e18-41d3-95c3-772bff339631.emitted": [
      "e29ef945-bb69-473f-b7a1-d30a3669089f.state"
    ],
    "e29ef945-bb69-473f-b7a1-d30a3669089f.state": [
      "db09225b-d9ef-4c3c-b4ab-61c4a034d345.nodes"
    ],
    "f7b9fa16-c3ed-4c8c-8624-1b79a5bdf1d1.fn": [
      "396c90e5-9aee-4edd-b952-a26505362aff.fn"
    ],
    "6ab6598b-151d-44ef-920f-0810f6da88b5.state": [
      "44bf83e8-c6b9-4c45-8dd6-e22aedff879b.state"
    ],
    "6ab6598b-151d-44ef-920f-0810f6da88b5.text": [
      "44bf83e8-c6b9-4c45-8dd6-e22aedff879b.intent"
    ],
    "44bf83e8-c6b9-4c45-8dd6-e22aedff879b.state": [
      "fd2c09be-8994-49a3-98b8-d7d3e2304aa2.state"
    ],
    "78329395-ffe5-4683-9642-debc07203bdb.dict": [
      "90a21c0e-38af-4099-847e-2a0bfa1c7666.variables",
      "6f662764-4a83-4db4-a350-d24224efd36b.value"
    ],
    "55979f0a-d3c9-4a76-960f-7ac0f3fcd76a.prompt": [
      "ea9bf575-80e1-4296-9f52-c3e0d79a6335.prompt"
    ],
    "ea9bf575-80e1-4296-9f52-c3e0d79a6335.rendered": [
      "6ab6598b-151d-44ef-920f-0810f6da88b5.instructions"
    ],
    "b2b78f64-c308-470a-a492-9f8e605208a9.value": [
      "55979f0a-d3c9-4a76-960f-7ac0f3fcd76a.variables"
    ],
    "d4017f75-26f2-4220-ab5a-c0bf769063f0.value": [
      "6ab6598b-151d-44ef-920f-0810f6da88b5.state"
    ],
    "a9e0118c-f630-4723-9a09-af0c45b42b53.value": [
      "55979f0a-d3c9-4a76-960f-7ac0f3fcd76a.template_text"
    ],
    "1937cd37-346a-4c39-be5c-5033bbf9e09e.value": [
      "90a21c0e-38af-4099-847e-2a0bfa1c7666.template"
    ]
  },
  "groups": [
    {
      "title": "Generate Theme - Stage 1",
      "x": -247,
      "y": -573,
      "width": 2382,
      "height": 398,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Generate Introduction - Stage 3",
      "x": -247,
      "y": 514,
      "width": 1821,
      "height": 610,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Outputs",
      "x": 2140,
      "y": -571,
      "width": 545,
      "height": 720,
      "color": "#8A8",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Analyze Theme - Stage 2",
      "x": -247,
      "y": -171,
      "width": 2381,
      "height": 682,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Inputs",
      "x": -1418,
      "y": -573,
      "width": 1165,
      "height": 740,
      "color": "#88A",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Init - Stage 0",
      "x": -248,
      "y": -829,
      "width": 802,
      "height": 251,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Error Handler",
      "x": -1118,
      "y": 175,
      "width": 864,
      "height": 401,
      "color": "#A88",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Generate Story Intention - Stage 4",
      "x": -247,
      "y": 1127,
      "width": 1555,
      "height": 587,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    }
  ],
  "comments": [
    {
      "text": "Responsible for analyzing the selected theme and proposing potential story lines in the context of the encompassing story baseline.",
      "x": 1370,
      "y": 49,
      "width": 411,
      "inherited": false
    },
    {
      "text": "Generates a list of short relevant themes to use to bootstrap a new story line.  Will consider the overarching topic.",
      "x": 770,
      "y": -360,
      "width": 303,
      "inherited": false
    },
    {
      "text": "Takes the selected theme from Stage 1 and the analysis of it from Stage 2 and uses it to generate a new introductory text for the scene, starting a new storyline.",
      "x": 1107,
      "y": 795,
      "width": 354,
      "inherited": false
    }
  ],
  "extends": null,
  "base_type": "core/Graph",
  "inputs": [],
  "outputs": [],
  "module_properties": {},
  "style": {
    "title_color": "#572e44",
    "node_color": "#392c34",
    "icon": "F1719",
    "auto_title": null
  }
}