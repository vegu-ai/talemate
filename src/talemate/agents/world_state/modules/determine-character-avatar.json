{
  "title": "Determine Character Avatar",
  "id": "e214f6aa-0826-4a62-8f8a-3b7b67abbf83",
  "properties": {},
  "x": 0,
  "y": 0,
  "width": 200,
  "height": 100,
  "collapsed": false,
  "inherited": false,
  "registry": "agents/world_state/determineCharacterAvatar",
  "nodes": {
    "5e15a41f-483c-4b66-99c9-4e47c6ef1e28": {
      "title": "world_state",
      "id": "5e15a41f-483c-4b66-99c9-4e47c6ef1e28",
      "properties": {
        "agent_name": "world_state"
      },
      "x": 503,
      "y": 1629,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/GetAgent",
      "base_type": "core/Node"
    },
    "a015ca87-d3f1-4bc8-aa5d-25ac16d26495": {
      "title": "Determine Message Avatar",
      "id": "a015ca87-d3f1-4bc8-aa5d-25ac16d26495",
      "properties": {
        "data_output": false,
        "data_multiple": false,
        "response_length": 256,
        "action_type": "world_state",
        "attempts": 1
      },
      "x": 1157,
      "y": 1590,
      "width": 270,
      "height": 294,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/GenerateResponse",
      "base_type": "core/Node"
    },
    "2afb24c5-148d-47a4-8b40-376166319e3f": {
      "title": "Unpack Character",
      "id": "2afb24c5-148d-47a4-8b40-376166319e3f",
      "properties": {},
      "x": 323,
      "y": 502,
      "width": 212,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "scene/UnpackCharacter",
      "base_type": "core/Node"
    },
    "82d14608-7da0-4c5b-800c-4b8de17a3b47": {
      "title": "GET local.character",
      "id": "82d14608-7da0-4c5b-800c-4b8de17a3b47",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": -48,
      "y": 502,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "96a7bcfa-da1b-4085-a7a3-f0705f0e18ac": {
      "title": "Get Assets",
      "id": "96a7bcfa-da1b-4085-a7a3-f0705f0e18ac",
      "properties": {
        "asset_ids": []
      },
      "x": 969,
      "y": 502,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/GetAssets",
      "base_type": "core/Node"
    },
    "3a84fac7-912f-4068-8f2b-bb5a6a17cf6b": {
      "title": "Trim",
      "id": "3a84fac7-912f-4068-8f2b-bb5a6a17cf6b",
      "properties": {
        "mode": "both",
        "chars": "`\""
      },
      "x": 1758,
      "y": 1590,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Trim",
      "base_type": "core/Node"
    },
    "1f74b552-ec91-41eb-a3a5-5f808e092454": {
      "title": "SET local.asset_id",
      "id": "1f74b552-ec91-41eb-a3a5-5f808e092454",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": 2004,
      "y": 1590,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "a14094bc-62b3-4f9c-bebb-a2a39b5cdb3f": {
      "title": "Worldstate Settings",
      "id": "a14094bc-62b3-4f9c-bebb-a2a39b5cdb3f",
      "properties": {},
      "x": -46,
      "y": -1551,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "a4d27804-f62a-4355-a05a-cb86e1a510e6": {
      "title": "Compare",
      "id": "a4d27804-f62a-4355-a05a-cb86e1a510e6",
      "properties": {
        "operation": "less_equal",
        "tolerance": 0.0001,
        "a": 0,
        "b": 0
      },
      "x": 504,
      "y": -1551,
      "width": 210,
      "height": 150,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Compare",
      "base_type": "core/Node"
    },
    "6f0815e7-676f-4614-84bb-6b7f1759e91a": {
      "title": "Switch",
      "id": "6f0815e7-676f-4614-84bb-6b7f1759e91a",
      "properties": {
        "pass_through": true
      },
      "x": 774,
      "y": -1551,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "38983e8b-c3ee-44a8-9c67-fdffcac962d1": {
      "title": "Stop",
      "id": "38983e8b-c3ee-44a8-9c67-fdffcac962d1",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 1074,
      "y": -1551,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "ec0cb719-dd87-47e6-a6c8-189c6cfc2c78": {
      "title": "Search Assets",
      "id": "ec0cb719-dd87-47e6-a6c8-189c6cfc2c78",
      "properties": {
        "vis_type": "CHARACTER_PORTRAIT",
        "character_name": "",
        "tags": [],
        "reference_vis_types": [],
        "tag_match_mode": "all"
      },
      "x": 569,
      "y": 502,
      "width": 329,
      "height": 274,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/SearchAssets",
      "base_type": "core/Node"
    },
    "4e31e1b9-1408-41ad-86c4-0d196a532753": {
      "title": "Build Prompt",
      "id": "4e31e1b9-1408-41ad-86c4-0d196a532753",
      "properties": {
        "template_file": "base",
        "scope": "common",
        "instructions": "",
        "reserved_tokens": 312,
        "limit_max_tokens": 4096,
        "include_scene_intent": true,
        "include_extra_context": false,
        "include_memory_context": false,
        "include_scene_context": true,
        "include_character_context": false,
        "include_gamestate_context": false,
        "memory_prompt": "",
        "prefill_prompt": "<ASSET_ID>",
        "return_prefill_prompt": true,
        "dedupe_enabled": true,
        "response_length": 96,
        "technical": false
      },
      "x": 687,
      "y": 1590,
      "width": 304,
      "height": 542,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/BuildPrompt",
      "base_type": "core/Node"
    },
    "807dd3e2-7d24-44d9-93dd-9f7200490f11": {
      "title": "GET local.character",
      "id": "807dd3e2-7d24-44d9-93dd-9f7200490f11",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": -17,
      "y": 1023,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "000e155a-e1d3-46bd-ac2a-6739b69ae12c": {
      "title": "avatars_selection_frequency",
      "id": "000e155a-e1d3-46bd-ac2a-6739b69ae12c",
      "properties": {},
      "x": 193,
      "y": 1263,
      "width": 227,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "ac0ea7fd-5c57-4283-b94f-18e91e8b388a": {
      "title": "Worldstate Settings",
      "id": "ac0ea7fd-5c57-4283-b94f-18e91e8b388a",
      "properties": {},
      "x": -47,
      "y": 1273,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "a2849692-f516-4f3d-ad0c-8ecda6fd531c": {
      "title": "Advanced Format",
      "id": "a2849692-f516-4f3d-ad0c-8ecda6fd531c",
      "properties": {
        "template": "determine_avater_{character.name}_cnt"
      },
      "x": 213,
      "y": 1023,
      "width": 210,
      "height": 133,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/AdvancedFormat",
      "dynamic_inputs": [
        {
          "name": "item0",
          "type": "*"
        }
      ],
      "base_type": "core/DynamicSocketNodeBase"
    },
    "164b4b07-b166-41e0-9251-3bcb0170e6f4": {
      "title": "true",
      "id": "164b4b07-b166-41e0-9251-3bcb0170e6f4",
      "properties": {
        "value": true
      },
      "x": 333,
      "y": 973,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "06284165-34f6-4e0f-abc1-2c2af49a29b6": {
      "title": "Counter Agent State",
      "id": "06284165-34f6-4e0f-abc1-2c2af49a29b6",
      "properties": {
        "name": null,
        "scope": "scene",
        "increment": 1,
        "reset": null,
        "reset_cap": "0",
        "agent": "world_state"
      },
      "x": 473,
      "y": 1023,
      "width": 288,
      "height": 318,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/CounterAgentState",
      "base_type": "core/Node"
    },
    "d0f0a9af-6cc5-4bda-8275-c20c4acf996d": {
      "title": "Stop",
      "id": "d0f0a9af-6cc5-4bda-8275-c20c4acf996d",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 1071,
      "y": 1257,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "25acdcda-b252-4cd5-b88b-badd94bb1479": {
      "title": "new_cycle",
      "id": "25acdcda-b252-4cd5-b88b-badd94bb1479",
      "properties": {},
      "x": 801,
      "y": 1167,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "74ddcb8b-032a-4cdc-ad38-39c8ee89a982": {
      "title": "Switch",
      "id": "74ddcb8b-032a-4cdc-ad38-39c8ee89a982",
      "properties": {
        "pass_through": true
      },
      "x": 801,
      "y": 1227,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "53769623-4f80-4b4a-8da0-d41bf1b53867": {
      "title": "Stage -10",
      "id": "53769623-4f80-4b4a-8da0-d41bf1b53867",
      "properties": {
        "stage": -10
      },
      "x": 1359,
      "y": -1551,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "39fe0931-b8bf-43ad-8250-bcd29178a4d3": {
      "title": "Extract",
      "id": "39fe0931-b8bf-43ad-8250-bcd29178a4d3",
      "properties": {
        "left_anchor": "<ASSET_ID>",
        "right_anchor": "</ASSET_ID>",
        "trim": true
      },
      "x": 1514,
      "y": 1590,
      "width": 210,
      "height": 146,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Extract",
      "base_type": "core/Node"
    },
    "b34f5a3c-bfb4-49c6-b458-e0bfc1bf058a": {
      "title": "IN state",
      "id": "b34f5a3c-bfb4-49c6-b458-e0bfc1bf058a",
      "properties": {
        "input_type": "any",
        "input_name": "state",
        "input_optional": false,
        "input_group": "",
        "num": 0
      },
      "x": -46,
      "y": -1275,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "e15b625b-c888-4c85-a9db-c2dff55be80e": {
      "title": "OUT state",
      "id": "e15b625b-c888-4c85-a9db-c2dff55be80e",
      "properties": {
        "output_type": "any",
        "output_name": "state",
        "num": 0
      },
      "x": 244,
      "y": -1275,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "435c18fe-8a2f-48ce-8655-8f0b67057bf3": {
      "title": "IN character",
      "id": "435c18fe-8a2f-48ce-8655-8f0b67057bf3",
      "properties": {
        "input_type": "character",
        "input_name": "character",
        "input_optional": false,
        "input_group": "",
        "num": 1
      },
      "x": -46,
      "y": -1065,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "ca5a8377-b242-4893-9f16-3a64e47f1a64": {
      "title": "SET local.character",
      "id": "ca5a8377-b242-4893-9f16-3a64e47f1a64",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": 244,
      "y": -1065,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "d1f452bb-bad8-47bb-aa40-f4e3b2039fbc": {
      "title": "SET local.content",
      "id": "d1f452bb-bad8-47bb-aa40-f4e3b2039fbc",
      "properties": {
        "name": "content",
        "scope": "local"
      },
      "x": 244,
      "y": -855,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "ba536afa-6234-4ffc-bccd-51f11ba66cb1": {
      "title": "OUT content",
      "id": "ba536afa-6234-4ffc-bccd-51f11ba66cb1",
      "properties": {
        "output_type": "str",
        "output_name": "content",
        "num": 2
      },
      "x": 1182,
      "y": -860,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "dd0a800c-1f9e-4add-80f5-1eb3d51435fa": {
      "title": "IN content",
      "id": "dd0a800c-1f9e-4add-80f5-1eb3d51435fa",
      "properties": {
        "input_type": "str",
        "input_name": "content",
        "input_optional": false,
        "input_group": "",
        "num": 2
      },
      "x": -46,
      "y": -855,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "819ecebb-ecd2-4d53-a88d-e39a92efdc8f": {
      "title": "Stage 2",
      "id": "819ecebb-ecd2-4d53-a88d-e39a92efdc8f",
      "properties": {
        "stage": 2
      },
      "x": 1330,
      "y": 1179,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "4dbdd542-019a-4c59-b828-b243b8660de1": {
      "title": "Stage 3",
      "id": "4dbdd542-019a-4c59-b828-b243b8660de1",
      "properties": {
        "stage": 3
      },
      "x": 2263,
      "y": 1590,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "7db5b9e7-7f90-4305-9264-04f280d80fea": {
      "title": "GET local.character",
      "id": "7db5b9e7-7f90-4305-9264-04f280d80fea",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": -46,
      "y": 4194,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "560af6a2-5513-496e-afe9-31bed689273c": {
      "title": "GET local.asset_id",
      "id": "560af6a2-5513-496e-afe9-31bed689273c",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": -46,
      "y": 4434,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "e20fe3af-d88d-4081-8de0-f9a0e7e4b8e8": {
      "title": "GET local.asset_id",
      "id": "e20fe3af-d88d-4081-8de0-f9a0e7e4b8e8",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": -46,
      "y": 4012,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "405d9409-8491-4aee-8e2a-5abfe955c364": {
      "title": "true",
      "id": "405d9409-8491-4aee-8e2a-5abfe955c364",
      "properties": {
        "value": true
      },
      "x": 609,
      "y": 3644,
      "width": 210,
      "height": 58,
      "collapsed": true,
      "inherited": false,
      "registry": "core/MakeBool",
      "base_type": "core/Node"
    },
    "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7": {
      "title": "Set Avatar Image",
      "id": "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7",
      "properties": {
        "avatar_type": "current"
      },
      "x": 626,
      "y": 4162,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/SetAvatarImage",
      "base_type": "core/Node"
    },
    "59c3043e-8bc3-416d-9842-ebf5145987af": {
      "title": "GET local.asset_id",
      "id": "59c3043e-8bc3-416d-9842-ebf5145987af",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": -46,
      "y": 3278,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "d7de567a-9158-4de2-b77c-8ca9bfb2869b": {
      "title": "Asset Exists",
      "id": "d7de567a-9158-4de2-b77c-8ca9bfb2869b",
      "properties": {
        "asset_id": "",
        "return_bool": false
      },
      "x": 253,
      "y": 3305,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/AssetExists",
      "base_type": "core/Node"
    },
    "0ae99596-f392-4c9b-ab57-db928df84786": {
      "title": "Instruct Avatar Generation",
      "id": "0ae99596-f392-4c9b-ab57-db928df84786",
      "properties": {},
      "x": 833,
      "y": 3574,
      "width": 312,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/director/instructAvatarGeneration",
      "base_type": "core/Graph"
    },
    "d25cd421-399a-40a8-acb8-b57cbd348c9e": {
      "title": "GET obj.current_avatar",
      "id": "d25cd421-399a-40a8-acb8-b57cbd348c9e",
      "properties": {
        "attribute": "current_avatar"
      },
      "x": 223,
      "y": 3626,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Get",
      "base_type": "core/Node"
    },
    "8c68d323-3cf4-4db8-adeb-8c8d6bb2ac57": {
      "title": "GET local.character",
      "id": "8c68d323-3cf4-4db8-adeb-8c8d6bb2ac57",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": -46,
      "y": 3474,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "8a7ec6d7-5877-48c0-b481-5122b0c1023c": {
      "title": "Not Set",
      "id": "8a7ec6d7-5877-48c0-b481-5122b0c1023c",
      "properties": {
        "pass_through": false
      },
      "x": 503,
      "y": 3695,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "ce0c515e-de04-4248-b5dd-ce860c4ce111": {
      "title": "character_management_generate_visuals",
      "id": "ce0c515e-de04-4248-b5dd-ce860c4ce111",
      "properties": {},
      "x": -40,
      "y": 2692,
      "width": 311,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "32cda3fa-dc2e-412a-9d3c-64720741eb04": {
      "title": "Director Settings",
      "id": "32cda3fa-dc2e-412a-9d3c-64720741eb04",
      "properties": {},
      "x": -40,
      "y": 2662,
      "width": 363,
      "height": 806,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/director/Settings",
      "base_type": "core/Node"
    },
    "fb1f0803-20eb-494c-867a-7dfbf60ece4e": {
      "title": "Worldstate Settings",
      "id": "fb1f0803-20eb-494c-867a-7dfbf60ece4e",
      "properties": {},
      "x": -40,
      "y": 2792,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "8b1f5f2d-e270-43b3-863e-254e513ccc84": {
      "title": "avatars_generate_new",
      "id": "8b1f5f2d-e270-43b3-863e-254e513ccc84",
      "properties": {},
      "x": -40,
      "y": 2822,
      "width": 185,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "dec5a122-5b72-4566-ba02-07edb649b482": {
      "title": "AND Router",
      "id": "dec5a122-5b72-4566-ba02-07edb649b482",
      "properties": {},
      "x": 760,
      "y": 2612,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ANDRouter",
      "base_type": "core/Node"
    },
    "033b120c-cea0-4fa8-92fe-6cd649b0495c": {
      "title": "Stage 4",
      "id": "033b120c-cea0-4fa8-92fe-6cd649b0495c",
      "properties": {
        "stage": 4
      },
      "x": 1220,
      "y": 2622,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "b8ba00a0-6863-4bd8-ad5a-517006183e0e": {
      "title": "Stop",
      "id": "b8ba00a0-6863-4bd8-ad5a-517006183e0e",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 1197,
      "y": 3576,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "7a6700cb-0fe1-4434-8c7b-afb311b15194": {
      "title": "Stage 5",
      "id": "7a6700cb-0fe1-4434-8c7b-afb311b15194",
      "properties": {
        "stage": 5
      },
      "x": 1497,
      "y": 3566,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "f942396c-804f-4f4c-8ca1-11b1bed06f61": {
      "title": "NOT",
      "id": "f942396c-804f-4f4c-8ca1-11b1bed06f61",
      "properties": {
        "pass_through": false
      },
      "x": 373,
      "y": 2719,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "524a7daa-48d3-41ef-80d1-e545c1fdc948": {
      "title": "Stop",
      "id": "524a7daa-48d3-41ef-80d1-e545c1fdc948",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 963,
      "y": 2629,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "f582136e-f99e-4a45-bb5d-63c2d7745c8b": {
      "title": "OR Router",
      "id": "f582136e-f99e-4a45-bb5d-63c2d7745c8b",
      "properties": {},
      "x": 520,
      "y": 2742,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ORRouter",
      "base_type": "core/Node"
    },
    "33a0edcc-e136-4776-a60c-601b86e879f8": {
      "title": "NOT",
      "id": "33a0edcc-e136-4776-a60c-601b86e879f8",
      "properties": {
        "pass_through": false
      },
      "x": 363,
      "y": 2849,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "9d93da47-221e-40e1-9bbc-116ddaad9dfa": {
      "title": "Director Settings",
      "id": "9d93da47-221e-40e1-9bbc-116ddaad9dfa",
      "properties": {},
      "x": 793,
      "y": 201,
      "width": 363,
      "height": 806,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/director/Settings",
      "base_type": "core/Node"
    },
    "99a5bbb9-36e5-4694-b248-c99aa120fbbf": {
      "title": "Worldstate Settings",
      "id": "99a5bbb9-36e5-4694-b248-c99aa120fbbf",
      "properties": {},
      "x": 793,
      "y": 331,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "55d97915-b002-44bb-ac92-d37ff7859995": {
      "title": "avatars_generate_new",
      "id": "55d97915-b002-44bb-ac92-d37ff7859995",
      "properties": {},
      "x": 793,
      "y": 361,
      "width": 185,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "4fc654e8-6503-44e2-aba8-c94290e61827": {
      "title": "AND Router",
      "id": "4fc654e8-6503-44e2-aba8-c94290e61827",
      "properties": {},
      "x": 1153,
      "y": 337,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ANDRouter",
      "base_type": "core/Node"
    },
    "c2cacebb-4476-4a7f-819d-df840b24c7b0": {
      "title": "character_management_generate_visuals",
      "id": "c2cacebb-4476-4a7f-819d-df840b24c7b0",
      "properties": {},
      "x": 793,
      "y": 227,
      "width": 311,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "631e134f-ef79-4c0f-9b92-6b979b2752d3": {
      "title": "OR Router",
      "id": "631e134f-ef79-4c0f-9b92-6b979b2752d3",
      "properties": {},
      "x": 1373,
      "y": 447,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ORRouter",
      "base_type": "core/Node"
    },
    "4c54be11-f254-475b-9b2b-c24db46aa903": {
      "title": "IN content",
      "id": "4c54be11-f254-475b-9b2b-c24db46aa903",
      "properties": {
        "input_type": "bool",
        "input_name": "force_regenerate",
        "input_optional": true,
        "input_group": "",
        "num": 3
      },
      "x": -46,
      "y": -605,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "fc1486c2-2a38-48f9-a0f1-1ce23f942203": {
      "title": "As Bool",
      "id": "fc1486c2-2a38-48f9-a0f1-1ce23f942203",
      "properties": {
        "default": false
      },
      "x": 203,
      "y": -605,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "core/AsBool",
      "base_type": "core/Node"
    },
    "dadd43e7-a732-45b2-813b-aa9b00f64d05": {
      "title": "SET local.force_regenerate",
      "id": "dadd43e7-a732-45b2-813b-aa9b00f64d05",
      "properties": {
        "name": "force_regenerate",
        "scope": "local"
      },
      "x": 473,
      "y": -605,
      "width": 218,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "3c642c25-6e3c-415d-93cb-6842d3fd8d26": {
      "title": "OUT force_regenerate",
      "id": "3c642c25-6e3c-415d-93cb-6842d3fd8d26",
      "properties": {
        "output_type": "bool",
        "output_name": "force_regenerate",
        "num": 3
      },
      "x": 1182,
      "y": -610,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "c9876d78-59d7-41a7-8a9e-a347ed5c87b7": {
      "title": "Stage 0",
      "id": "c9876d78-59d7-41a7-8a9e-a347ed5c87b7",
      "properties": {
        "stage": 0
      },
      "x": 856,
      "y": -855,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "654dd0e6-ae83-4721-837e-02dee5a79f71": {
      "title": "NOT",
      "id": "654dd0e6-ae83-4721-837e-02dee5a79f71",
      "properties": {
        "pass_through": false
      },
      "x": 533,
      "y": 1504,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "7e3b4973-4ce1-4f45-a362-f22753b97c50": {
      "title": "GET local.asset_id",
      "id": "7e3b4973-4ce1-4f45-a362-f22753b97c50",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": -46,
      "y": 2435,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "805e7c26-5aef-4a0f-9e95-ffd06672ebe4": {
      "title": "Asset Exists",
      "id": "805e7c26-5aef-4a0f-9e95-ffd06672ebe4",
      "properties": {
        "asset_id": "",
        "return_bool": true
      },
      "x": 273,
      "y": 2435,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/AssetExists",
      "base_type": "core/Node"
    },
    "1d97e9e1-34b9-4799-a998-4da9c8b96263": {
      "title": "SET local.asset_id",
      "id": "1d97e9e1-34b9-4799-a998-4da9c8b96263",
      "properties": {
        "name": "asset_id",
        "scope": "local"
      },
      "x": 473,
      "y": -312,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "228a21c1-3a80-4066-a9ea-57fecec4ddd5": {
      "title": "Make String",
      "id": "228a21c1-3a80-4066-a9ea-57fecec4ddd5",
      "properties": {
        "value": ""
      },
      "x": 203,
      "y": -292,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/string/Make",
      "base_type": "core/Node"
    },
    "9dd2585d-fe9a-42a4-800f-21617f953b49": {
      "title": "GET local.message_ids",
      "id": "9dd2585d-fe9a-42a4-800f-21617f953b49",
      "properties": {
        "name": "message_ids",
        "scope": "local"
      },
      "x": -46,
      "y": 3786,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "6413844b-82dd-4d26-a76c-930fbc34be71": {
      "title": "As Number",
      "id": "6413844b-82dd-4d26-a76c-930fbc34be71",
      "properties": {
        "number_type": "int"
      },
      "x": 231,
      "y": -1551,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/AsNumber",
      "base_type": "core/Node"
    },
    "80abef1e-156b-4951-9f73-a7754ac40ade": {
      "title": "Stage 6",
      "id": "80abef1e-156b-4951-9f73-a7754ac40ade",
      "properties": {
        "stage": 6
      },
      "x": 940,
      "y": 4163,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "141b52ef-74da-432f-b792-311779799533": {
      "title": "OUT asset_id",
      "id": "141b52ef-74da-432f-b792-311779799533",
      "properties": {
        "output_type": "str",
        "output_name": "asset_id",
        "num": 3
      },
      "x": 300,
      "y": 4453,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "20343bdc-b718-457b-8d49-e4b6c4768736": {
      "title": "Module Style",
      "id": "20343bdc-b718-457b-8d49-e4b6c4768736",
      "properties": {
        "title_color": "#3d315b",
        "node_color": "#27233a",
        "auto_title": null,
        "icon": "F1CC8"
      },
      "x": 1182,
      "y": -1285,
      "width": 210,
      "height": 110,
      "collapsed": false,
      "inherited": false,
      "registry": "util/ModuleStyle",
      "base_type": "core/Node"
    },
    "f06b2593-a249-45a4-b79a-a08703b289c1": {
      "title": "Load Template",
      "id": "f06b2593-a249-45a4-b79a-a08703b289c1",
      "properties": {
        "scope": "world_state",
        "name": "determine-avatar"
      },
      "x": -50,
      "y": 1450,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/LoadTemplate",
      "base_type": "core/Node"
    },
    "d7273b1c-0ba1-43b5-aa1c-461065bb444a": {
      "title": "GET local.content",
      "id": "d7273b1c-0ba1-43b5-aa1c-461065bb444a",
      "properties": {
        "name": "content",
        "scope": "local"
      },
      "x": -50,
      "y": 1610,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "30ff7767-79ae-4f58-944f-07aaedf9c486": {
      "title": "GET local.character",
      "id": "30ff7767-79ae-4f58-944f-07aaedf9c486",
      "properties": {
        "name": "character",
        "scope": "local"
      },
      "x": -50,
      "y": 1790,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "fa202813-d279-4e72-986b-9abf647f1a6d": {
      "title": "GET local.assets",
      "id": "fa202813-d279-4e72-986b-9abf647f1a6d",
      "properties": {
        "name": "assets",
        "scope": "local"
      },
      "x": -50,
      "y": 1970,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "7c3fcc25-eeec-4cf4-9180-6353fb170624": {
      "title": "GET local.force_regenerate",
      "id": "7c3fcc25-eeec-4cf4-9180-6353fb170624",
      "properties": {
        "name": "force_regenerate",
        "scope": "local"
      },
      "x": 270,
      "y": 1450,
      "width": 218,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "82651788-6414-4769-b0b2-01627c6b5bec": {
      "title": "GET local.force_regenerate",
      "id": "82651788-6414-4769-b0b2-01627c6b5bec",
      "properties": {
        "name": "force_regenerate",
        "scope": "local"
      },
      "x": 194,
      "y": 2942,
      "width": 218,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "11a455e1-dd3f-4b23-ab28-90077fc3d283": {
      "title": "NOT",
      "id": "11a455e1-dd3f-4b23-ab28-90077fc3d283",
      "properties": {
        "pass_through": false
      },
      "x": 564,
      "y": 2932,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "b1354777-edbe-43c6-a048-a661a52f7553": {
      "title": "OUT character",
      "id": "b1354777-edbe-43c6-a048-a661a52f7553",
      "properties": {
        "output_type": "character",
        "output_name": "character",
        "num": 1
      },
      "x": 1180,
      "y": -1070,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "0a7784d0-9ecd-411b-8e33-8887fe9fe7bf": {
      "title": "IN asset_ctx",
      "id": "0a7784d0-9ecd-411b-8e33-8887fe9fe7bf",
      "properties": {
        "input_type": "asset_attachment_context",
        "input_name": "asset_ctx",
        "input_optional": true,
        "input_group": "",
        "num": 4
      },
      "x": -50,
      "y": -65,
      "width": 210,
      "height": 154,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Input",
      "base_type": "core/Node"
    },
    "be0774b0-c3c4-4526-9d96-38934be5ecf2": {
      "title": "SET local.asset_ctx",
      "id": "be0774b0-c3c4-4526-9d96-38934be5ecf2",
      "properties": {
        "name": "asset_ctx",
        "scope": "local"
      },
      "x": 444,
      "y": -65,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "73f3fbf1-238c-401c-ba6f-e862482d0429": {
      "title": "Stage 0",
      "id": "73f3fbf1-238c-401c-ba6f-e862482d0429",
      "properties": {
        "stage": 0
      },
      "x": 841,
      "y": -65,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "26e62ccf-c283-43b8-aaa1-1ff2facc0787": {
      "title": "OUT asset_ctx",
      "id": "26e62ccf-c283-43b8-aaa1-1ff2facc0787",
      "properties": {
        "output_type": "asset_attachment_context",
        "output_name": "asset_ctx",
        "num": 4
      },
      "x": 1170,
      "y": -65,
      "width": 210,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Output",
      "base_type": "core/Node"
    },
    "d374c8b6-13e5-4fe2-a982-ccae9b9dc882": {
      "title": "GET local.asset_ctx",
      "id": "d374c8b6-13e5-4fe2-a982-ccae9b9dc882",
      "properties": {
        "name": "asset_ctx",
        "scope": "local"
      },
      "x": 580,
      "y": 3758,
      "width": 210,
      "height": 122,
      "collapsed": true,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "741f9dad-2712-4b8c-bf0a-45a4521c829f": {
      "title": "Director Settings",
      "id": "741f9dad-2712-4b8c-bf0a-45a4521c829f",
      "properties": {},
      "x": 1401,
      "y": 192,
      "width": 363,
      "height": 806,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/director/Settings",
      "base_type": "core/Node"
    },
    "6ce80f1a-8ecb-4030-9e58-42dc9d7c92eb": {
      "title": "Worldstate Settings",
      "id": "6ce80f1a-8ecb-4030-9e58-42dc9d7c92eb",
      "properties": {},
      "x": 1401,
      "y": 322,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "6c4a724e-26e0-4e33-8144-619d667ac5ff": {
      "title": "avatars_generate_new",
      "id": "6c4a724e-26e0-4e33-8144-619d667ac5ff",
      "properties": {},
      "x": 1401,
      "y": 352,
      "width": 185,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "83637aaa-3196-4a0b-ad42-8eba735fe86f": {
      "title": "NOT",
      "id": "83637aaa-3196-4a0b-ad42-8eba735fe86f",
      "properties": {
        "pass_through": false
      },
      "x": 1804,
      "y": 379,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "082262af-4e88-4976-a08f-74d4ede20a37": {
      "title": "character_management_generate_visuals",
      "id": "082262af-4e88-4976-a08f-74d4ede20a37",
      "properties": {},
      "x": 1401,
      "y": 222,
      "width": 311,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Watch",
      "base_type": "core/Node"
    },
    "bf4537c4-0634-4a54-8d79-c7145825a078": {
      "title": "NOT",
      "id": "bf4537c4-0634-4a54-8d79-c7145825a078",
      "properties": {
        "pass_through": false
      },
      "x": 1804,
      "y": 248,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "3b4446ee-578c-4c8e-88e8-024c2314558b": {
      "title": "GET local.deny_generation",
      "id": "3b4446ee-578c-4c8e-88e8-024c2314558b",
      "properties": {
        "name": "deny_generation",
        "scope": "local"
      },
      "x": 500,
      "y": 3040,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "db15d297-eda7-482e-a8f2-1f25bdf4d466": {
      "title": "Jinja2 Format",
      "id": "db15d297-eda7-482e-a8f2-1f25bdf4d466",
      "properties": {
        "template": ""
      },
      "x": 360,
      "y": 1830,
      "width": 210,
      "height": 213,
      "collapsed": false,
      "inherited": false,
      "registry": "prompt/Jinja2Format",
      "dynamic_inputs": [
        {
          "name": "item0",
          "type": "*"
        },
        {
          "name": "item1",
          "type": "*"
        },
        {
          "name": "item2",
          "type": "*"
        },
        {
          "name": "item3",
          "type": "*"
        }
      ],
      "base_type": "core/DynamicSocketNodeBase"
    },
    "5f65e0dc-c7d4-4339-869d-e914cfad6222": {
      "title": "GET local.deny_generation",
      "id": "5f65e0dc-c7d4-4339-869d-e914cfad6222",
      "properties": {
        "name": "deny_generation",
        "scope": "local"
      },
      "x": -50,
      "y": 2160,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/GetState",
      "base_type": "core/Node"
    },
    "7b5c375f-dab2-49bf-8321-6ebe1e9055b4": {
      "title": "OR Router",
      "id": "7b5c375f-dab2-49bf-8321-6ebe1e9055b4",
      "properties": {},
      "x": 2069,
      "y": 248,
      "width": 140,
      "height": 106,
      "collapsed": false,
      "inherited": false,
      "registry": "core/ORRouter",
      "base_type": "core/Node"
    },
    "f0fb1e9e-c109-439a-8d31-ba19805978a4": {
      "title": "SET local.deny_generation",
      "id": "f0fb1e9e-c109-439a-8d31-ba19805978a4",
      "properties": {
        "name": "deny_generation",
        "scope": "local"
      },
      "x": 2259,
      "y": 248,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "71a1e2ba-f66e-4d7f-9080-b83a811a919a": {
      "title": "SET local.assets",
      "id": "71a1e2ba-f66e-4d7f-9080-b83a811a919a",
      "properties": {
        "name": "assets",
        "scope": "local"
      },
      "x": 2069,
      "y": 498,
      "width": 210,
      "height": 122,
      "collapsed": false,
      "inherited": false,
      "registry": "state/SetState",
      "base_type": "core/Node"
    },
    "e73766a9-807d-4b1b-bb6a-1de1ce418103": {
      "title": "Stop",
      "id": "e73766a9-807d-4b1b-bb6a-1de1ce418103",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 2069,
      "y": 738,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "ddd210f1-78ea-4c3a-890f-d8bfb200aba2": {
      "title": "RSwitch Advanced",
      "id": "ddd210f1-78ea-4c3a-890f-d8bfb200aba2",
      "properties": {},
      "x": 1669,
      "y": 638,
      "width": 165,
      "height": 75,
      "collapsed": false,
      "inherited": false,
      "registry": "core/RSwitchAdvanced",
      "base_type": "core/Node"
    },
    "68fc9e4c-37ac-43b6-8681-970d09990cac": {
      "title": "Stage 1",
      "id": "68fc9e4c-37ac-43b6-8681-970d09990cac",
      "properties": {
        "stage": 1
      },
      "x": 2609,
      "y": 498,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    },
    "e83fb0cb-33bb-43db-b915-bc3d31403019": {
      "title": "Compare",
      "id": "e83fb0cb-33bb-43db-b915-bc3d31403019",
      "properties": {
        "operation": "greater_than",
        "tolerance": 0,
        "a": 0,
        "b": 1
      },
      "x": 968,
      "y": 670,
      "width": 210,
      "height": 150,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Compare",
      "base_type": "core/Node"
    },
    "1203c7ca-0eba-4629-9f3e-98d402cd62a0": {
      "title": "Switch",
      "id": "1203c7ca-0eba-4629-9f3e-98d402cd62a0",
      "properties": {
        "pass_through": true
      },
      "x": 220,
      "y": 4020,
      "width": 210,
      "height": 78,
      "collapsed": true,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "3bbc63b0-5a70-409c-9d1a-287e7d9dece1": {
      "title": "Asset Exists",
      "id": "3bbc63b0-5a70-409c-9d1a-287e7d9dece1",
      "properties": {
        "asset_id": "",
        "return_bool": false
      },
      "x": 380,
      "y": 3990,
      "width": 210,
      "height": 102,
      "collapsed": false,
      "inherited": false,
      "registry": "assets/AssetExists",
      "base_type": "core/Node"
    }
  },
  "edges": {
    "5e15a41f-483c-4b66-99c9-4e47c6ef1e28.agent": [
      "4e31e1b9-1408-41ad-86c4-0d196a532753.agent"
    ],
    "a015ca87-d3f1-4bc8-aa5d-25ac16d26495.response": [
      "39fe0931-b8bf-43ad-8250-bcd29178a4d3.string"
    ],
    "2afb24c5-148d-47a4-8b40-376166319e3f.name": [
      "ec0cb719-dd87-47e6-a6c8-189c6cfc2c78.character_name"
    ],
    "82d14608-7da0-4c5b-800c-4b8de17a3b47.value": [
      "2afb24c5-148d-47a4-8b40-376166319e3f.character"
    ],
    "96a7bcfa-da1b-4085-a7a3-f0705f0e18ac.assets": [
      "ddd210f1-78ea-4c3a-890f-d8bfb200aba2.yes"
    ],
    "3a84fac7-912f-4068-8f2b-bb5a6a17cf6b.result": [
      "1f74b552-ec91-41eb-a3a5-5f808e092454.value"
    ],
    "1f74b552-ec91-41eb-a3a5-5f808e092454.value": [
      "4dbdd542-019a-4c59-b828-b243b8660de1.state"
    ],
    "a14094bc-62b3-4f9c-bebb-a2a39b5cdb3f.avatars_selection_frequency": [
      "6413844b-82dd-4d26-a76c-930fbc34be71.value"
    ],
    "a4d27804-f62a-4355-a05a-cb86e1a510e6.result": [
      "6f0815e7-676f-4614-84bb-6b7f1759e91a.value"
    ],
    "6f0815e7-676f-4614-84bb-6b7f1759e91a.yes": [
      "38983e8b-c3ee-44a8-9c67-fdffcac962d1.state"
    ],
    "38983e8b-c3ee-44a8-9c67-fdffcac962d1.state": [
      "53769623-4f80-4b4a-8da0-d41bf1b53867.state"
    ],
    "ec0cb719-dd87-47e6-a6c8-189c6cfc2c78.asset_ids": [
      "96a7bcfa-da1b-4085-a7a3-f0705f0e18ac.asset_ids"
    ],
    "ec0cb719-dd87-47e6-a6c8-189c6cfc2c78.asset_count": [
      "e83fb0cb-33bb-43db-b915-bc3d31403019.a"
    ],
    "4e31e1b9-1408-41ad-86c4-0d196a532753.state": [
      "a015ca87-d3f1-4bc8-aa5d-25ac16d26495.state"
    ],
    "4e31e1b9-1408-41ad-86c4-0d196a532753.agent": [
      "a015ca87-d3f1-4bc8-aa5d-25ac16d26495.agent"
    ],
    "4e31e1b9-1408-41ad-86c4-0d196a532753.prompt": [
      "a015ca87-d3f1-4bc8-aa5d-25ac16d26495.prompt"
    ],
    "4e31e1b9-1408-41ad-86c4-0d196a532753.response_length": [
      "a015ca87-d3f1-4bc8-aa5d-25ac16d26495.response_length"
    ],
    "807dd3e2-7d24-44d9-93dd-9f7200490f11.value": [
      "a2849692-f516-4f3d-ad0c-8ecda6fd531c.item0"
    ],
    "000e155a-e1d3-46bd-ac2a-6739b69ae12c.value": [
      "06284165-34f6-4e0f-abc1-2c2af49a29b6.reset_cap"
    ],
    "ac0ea7fd-5c57-4283-b94f-18e91e8b388a.avatars_selection_frequency": [
      "000e155a-e1d3-46bd-ac2a-6739b69ae12c.value"
    ],
    "a2849692-f516-4f3d-ad0c-8ecda6fd531c.result": [
      "06284165-34f6-4e0f-abc1-2c2af49a29b6.name"
    ],
    "164b4b07-b166-41e0-9251-3bcb0170e6f4.value": [
      "06284165-34f6-4e0f-abc1-2c2af49a29b6.state"
    ],
    "06284165-34f6-4e0f-abc1-2c2af49a29b6.new_cycle": [
      "25acdcda-b252-4cd5-b88b-badd94bb1479.value"
    ],
    "d0f0a9af-6cc5-4bda-8275-c20c4acf996d.state": [
      "819ecebb-ecd2-4d53-a88d-e39a92efdc8f.state_c"
    ],
    "25acdcda-b252-4cd5-b88b-badd94bb1479.value": [
      "74ddcb8b-032a-4cdc-ad38-39c8ee89a982.value"
    ],
    "74ddcb8b-032a-4cdc-ad38-39c8ee89a982.no": [
      "d0f0a9af-6cc5-4bda-8275-c20c4acf996d.state"
    ],
    "39fe0931-b8bf-43ad-8250-bcd29178a4d3.result": [
      "3a84fac7-912f-4068-8f2b-bb5a6a17cf6b.string"
    ],
    "b34f5a3c-bfb4-49c6-b458-e0bfc1bf058a.value": [
      "e15b625b-c888-4c85-a9db-c2dff55be80e.value"
    ],
    "435c18fe-8a2f-48ce-8655-8f0b67057bf3.value": [
      "ca5a8377-b242-4893-9f16-3a64e47f1a64.value"
    ],
    "ca5a8377-b242-4893-9f16-3a64e47f1a64.value": [
      "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state"
    ],
    "d1f452bb-bad8-47bb-aa40-f4e3b2039fbc.value": [
      "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state_b"
    ],
    "dd0a800c-1f9e-4add-80f5-1eb3d51435fa.value": [
      "d1f452bb-bad8-47bb-aa40-f4e3b2039fbc.value"
    ],
    "7db5b9e7-7f90-4305-9264-04f280d80fea.value": [
      "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7.character"
    ],
    "560af6a2-5513-496e-afe9-31bed689273c.value": [
      "141b52ef-74da-432f-b792-311779799533.value"
    ],
    "e20fe3af-d88d-4081-8de0-f9a0e7e4b8e8.value": [
      "1203c7ca-0eba-4629-9f3e-98d402cd62a0.value",
      "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7.asset_id"
    ],
    "405d9409-8491-4aee-8e2a-5abfe955c364.value": [
      "0ae99596-f392-4c9b-ab57-db928df84786.set_current_avatar"
    ],
    "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7.state": [
      "80abef1e-156b-4951-9f73-a7754ac40ade.state"
    ],
    "59c3043e-8bc3-416d-9842-ebf5145987af.value": [
      "d7de567a-9158-4de2-b77c-8ca9bfb2869b.asset_id"
    ],
    "d7de567a-9158-4de2-b77c-8ca9bfb2869b.no": [
      "0ae99596-f392-4c9b-ab57-db928df84786.state"
    ],
    "0ae99596-f392-4c9b-ab57-db928df84786.state": [
      "b8ba00a0-6863-4bd8-ad5a-517006183e0e.state"
    ],
    "d25cd421-399a-40a8-acb8-b57cbd348c9e.value": [
      "8a7ec6d7-5877-48c0-b481-5122b0c1023c.value"
    ],
    "8c68d323-3cf4-4db8-adeb-8c8d6bb2ac57.value": [
      "0ae99596-f392-4c9b-ab57-db928df84786.character",
      "d25cd421-399a-40a8-acb8-b57cbd348c9e.object"
    ],
    "8a7ec6d7-5877-48c0-b481-5122b0c1023c.no": [
      "0ae99596-f392-4c9b-ab57-db928df84786.set_default_avatar"
    ],
    "ce0c515e-de04-4248-b5dd-ce860c4ce111.value": [
      "f942396c-804f-4f4c-8ca1-11b1bed06f61.value"
    ],
    "32cda3fa-dc2e-412a-9d3c-64720741eb04.character_management_generate_visuals": [
      "ce0c515e-de04-4248-b5dd-ce860c4ce111.value"
    ],
    "fb1f0803-20eb-494c-867a-7dfbf60ece4e.avatars_generate_new": [
      "8b1f5f2d-e270-43b3-863e-254e513ccc84.value"
    ],
    "8b1f5f2d-e270-43b3-863e-254e513ccc84.value": [
      "33a0edcc-e136-4776-a60c-601b86e879f8.value"
    ],
    "dec5a122-5b72-4566-ba02-07edb649b482.yes": [
      "524a7daa-48d3-41ef-80d1-e545c1fdc948.state"
    ],
    "b8ba00a0-6863-4bd8-ad5a-517006183e0e.state": [
      "7a6700cb-0fe1-4434-8c7b-afb311b15194.state"
    ],
    "f942396c-804f-4f4c-8ca1-11b1bed06f61.no": [
      "f582136e-f99e-4a45-bb5d-63c2d7745c8b.a"
    ],
    "524a7daa-48d3-41ef-80d1-e545c1fdc948.state": [
      "033b120c-cea0-4fa8-92fe-6cd649b0495c.state"
    ],
    "33a0edcc-e136-4776-a60c-601b86e879f8.no": [
      "f582136e-f99e-4a45-bb5d-63c2d7745c8b.b"
    ],
    "9d93da47-221e-40e1-9bbc-116ddaad9dfa.character_management_generate_visuals": [
      "c2cacebb-4476-4a7f-819d-df840b24c7b0.value"
    ],
    "99a5bbb9-36e5-4694-b248-c99aa120fbbf.avatars_generate_new": [
      "55d97915-b002-44bb-ac92-d37ff7859995.value"
    ],
    "55d97915-b002-44bb-ac92-d37ff7859995.value": [
      "4fc654e8-6503-44e2-aba8-c94290e61827.b"
    ],
    "4fc654e8-6503-44e2-aba8-c94290e61827.yes": [
      "631e134f-ef79-4c0f-9b92-6b979b2752d3.a"
    ],
    "c2cacebb-4476-4a7f-819d-df840b24c7b0.value": [
      "4fc654e8-6503-44e2-aba8-c94290e61827.a"
    ],
    "631e134f-ef79-4c0f-9b92-6b979b2752d3.yes": [
      "ddd210f1-78ea-4c3a-890f-d8bfb200aba2.check"
    ],
    "4c54be11-f254-475b-9b2b-c24db46aa903.value": [
      "fc1486c2-2a38-48f9-a0f1-1ce23f942203.value"
    ],
    "fc1486c2-2a38-48f9-a0f1-1ce23f942203.value": [
      "dadd43e7-a732-45b2-813b-aa9b00f64d05.value"
    ],
    "dadd43e7-a732-45b2-813b-aa9b00f64d05.value": [
      "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state_c"
    ],
    "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state": [
      "b1354777-edbe-43c6-a048-a661a52f7553.value"
    ],
    "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state_b": [
      "ba536afa-6234-4ffc-bccd-51f11ba66cb1.value"
    ],
    "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state_c": [
      "3c642c25-6e3c-415d-93cb-6842d3fd8d26.value"
    ],
    "654dd0e6-ae83-4721-837e-02dee5a79f71.no": [
      "4e31e1b9-1408-41ad-86c4-0d196a532753.state"
    ],
    "7e3b4973-4ce1-4f45-a362-f22753b97c50.value": [
      "805e7c26-5aef-4a0f-9e95-ffd06672ebe4.asset_id"
    ],
    "805e7c26-5aef-4a0f-9e95-ffd06672ebe4.no": [
      "dec5a122-5b72-4566-ba02-07edb649b482.a"
    ],
    "1d97e9e1-34b9-4799-a998-4da9c8b96263.value": [
      "c9876d78-59d7-41a7-8a9e-a347ed5c87b7.state_d"
    ],
    "228a21c1-3a80-4066-a9ea-57fecec4ddd5.value": [
      "1d97e9e1-34b9-4799-a998-4da9c8b96263.value"
    ],
    "6413844b-82dd-4d26-a76c-930fbc34be71.value": [
      "a4d27804-f62a-4355-a05a-cb86e1a510e6.a"
    ],
    "f06b2593-a249-45a4-b79a-a08703b289c1.template_content": [
      "db15d297-eda7-482e-a8f2-1f25bdf4d466.template"
    ],
    "d7273b1c-0ba1-43b5-aa1c-461065bb444a.value": [
      "db15d297-eda7-482e-a8f2-1f25bdf4d466.item0"
    ],
    "30ff7767-79ae-4f58-944f-07aaedf9c486.value": [
      "db15d297-eda7-482e-a8f2-1f25bdf4d466.item1"
    ],
    "fa202813-d279-4e72-986b-9abf647f1a6d.value": [
      "db15d297-eda7-482e-a8f2-1f25bdf4d466.item2"
    ],
    "7c3fcc25-eeec-4cf4-9180-6353fb170624.value": [
      "654dd0e6-ae83-4721-837e-02dee5a79f71.value"
    ],
    "82651788-6414-4769-b0b2-01627c6b5bec.value": [
      "11a455e1-dd3f-4b23-ab28-90077fc3d283.value"
    ],
    "11a455e1-dd3f-4b23-ab28-90077fc3d283.no": [
      "dec5a122-5b72-4566-ba02-07edb649b482.c"
    ],
    "0a7784d0-9ecd-411b-8e33-8887fe9fe7bf.value": [
      "be0774b0-c3c4-4526-9d96-38934be5ecf2.value"
    ],
    "be0774b0-c3c4-4526-9d96-38934be5ecf2.value": [
      "73f3fbf1-238c-401c-ba6f-e862482d0429.state"
    ],
    "73f3fbf1-238c-401c-ba6f-e862482d0429.state": [
      "26e62ccf-c283-43b8-aaa1-1ff2facc0787.value"
    ],
    "d374c8b6-13e5-4fe2-a982-ccae9b9dc882.value": [
      "0ae99596-f392-4c9b-ab57-db928df84786.asset_ctx"
    ],
    "741f9dad-2712-4b8c-bf0a-45a4521c829f.character_management_generate_visuals": [
      "082262af-4e88-4976-a08f-74d4ede20a37.value"
    ],
    "6ce80f1a-8ecb-4030-9e58-42dc9d7c92eb.avatars_generate_new": [
      "6c4a724e-26e0-4e33-8144-619d667ac5ff.value"
    ],
    "6c4a724e-26e0-4e33-8144-619d667ac5ff.value": [
      "83637aaa-3196-4a0b-ad42-8eba735fe86f.value"
    ],
    "83637aaa-3196-4a0b-ad42-8eba735fe86f.no": [
      "7b5c375f-dab2-49bf-8321-6ebe1e9055b4.b"
    ],
    "082262af-4e88-4976-a08f-74d4ede20a37.value": [
      "bf4537c4-0634-4a54-8d79-c7145825a078.value"
    ],
    "bf4537c4-0634-4a54-8d79-c7145825a078.no": [
      "7b5c375f-dab2-49bf-8321-6ebe1e9055b4.a"
    ],
    "3b4446ee-578c-4c8e-88e8-024c2314558b.value": [
      "dec5a122-5b72-4566-ba02-07edb649b482.b"
    ],
    "db15d297-eda7-482e-a8f2-1f25bdf4d466.result": [
      "4e31e1b9-1408-41ad-86c4-0d196a532753.instructions"
    ],
    "5f65e0dc-c7d4-4339-869d-e914cfad6222.value": [
      "db15d297-eda7-482e-a8f2-1f25bdf4d466.item3"
    ],
    "7b5c375f-dab2-49bf-8321-6ebe1e9055b4.yes": [
      "f0fb1e9e-c109-439a-8d31-ba19805978a4.value"
    ],
    "f0fb1e9e-c109-439a-8d31-ba19805978a4.value": [
      "68fc9e4c-37ac-43b6-8681-970d09990cac.state"
    ],
    "71a1e2ba-f66e-4d7f-9080-b83a811a919a.value": [
      "68fc9e4c-37ac-43b6-8681-970d09990cac.state_b"
    ],
    "e73766a9-807d-4b1b-bb6a-1de1ce418103.state": [
      "68fc9e4c-37ac-43b6-8681-970d09990cac.state_c"
    ],
    "ddd210f1-78ea-4c3a-890f-d8bfb200aba2.yes": [
      "71a1e2ba-f66e-4d7f-9080-b83a811a919a.value"
    ],
    "ddd210f1-78ea-4c3a-890f-d8bfb200aba2.no": [
      "e73766a9-807d-4b1b-bb6a-1de1ce418103.state"
    ],
    "e83fb0cb-33bb-43db-b915-bc3d31403019.result": [
      "631e134f-ef79-4c0f-9b92-6b979b2752d3.b",
      "ddd210f1-78ea-4c3a-890f-d8bfb200aba2.no"
    ],
    "1203c7ca-0eba-4629-9f3e-98d402cd62a0.yes": [
      "3bbc63b0-5a70-409c-9d1a-287e7d9dece1.asset_id"
    ],
    "3bbc63b0-5a70-409c-9d1a-287e7d9dece1.yes": [
      "6a5c8728-9ae8-4e3e-9116-ee55b54fa2a7.state"
    ]
  },
  "groups": [
    {
      "title": "Validation",
      "x": -71,
      "y": -1631,
      "width": 1665,
      "height": 272,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Validation",
      "x": -73,
      "y": 112,
      "width": 2917,
      "height": 733,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Validation",
      "x": -71,
      "y": 851,
      "width": 1677,
      "height": 520,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Process",
      "x": -71,
      "y": 1374,
      "width": 2657,
      "height": 981,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Generate new avatar",
      "x": -71,
      "y": 3198,
      "width": 1803,
      "height": 735,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Output",
      "x": -71,
      "y": 4351,
      "width": 629,
      "height": 248,
      "color": "#8A8",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Process",
      "x": -71,
      "y": 3936,
      "width": 1259,
      "height": 412,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Validation",
      "x": -71,
      "y": 2358,
      "width": 1560,
      "height": 837,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Input",
      "x": -71,
      "y": -1355,
      "width": 1492,
      "height": 1468,
      "color": "#88A",
      "font_size": 24,
      "inherited": false
    }
  ],
  "comments": [
    {
      "text": "AI assisted avatar selection toggle check - if disabled, bail early.",
      "x": -16,
      "y": -1464,
      "width": 200,
      "inherited": false
    },
    {
      "text": "If frequency > 1 we only proceed when the counter for this character resets.\n\nThe value is stored in the world state as determine_avater_{character_name}_cnt.",
      "x": 1261,
      "y": 927,
      "width": 302,
      "inherited": false
    },
    {
      "text": "A character must have at least 2 avatars, bail otherwise.",
      "x": -21,
      "y": 685,
      "width": 200,
      "inherited": false
    },
    {
      "text": "AI assisted avatar selection toggle check - if disabled, bail early.",
      "x": -16,
      "y": -1464,
      "width": 200,
      "inherited": false
    },
    {
      "text": "If frequency > 1 we only proceed when the counter for this character resets.\n\nThe value is stored in the world state as determine_avater_{character_name}_cnt.",
      "x": 1261,
      "y": 927,
      "width": 302,
      "inherited": false
    },
    {
      "text": "A character must have at least 2 avatars, bail otherwise.",
      "x": -21,
      "y": 685,
      "width": 200,
      "inherited": false
    },
    {
      "text": "Are the agents allowed to generate new avatars?",
      "x": 1163,
      "y": 217,
      "width": 200,
      "inherited": false
    }
  ],
  "extends": null,
  "base_type": "core/Graph",
  "inputs": [],
  "outputs": [],
  "module_properties": {},
  "style": {
    "title_color": "#3d315b",
    "node_color": "#27233a",
    "icon": "F1CC8",
    "auto_title": null,
    "counterpart": null
  }
}